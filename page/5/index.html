<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/img/lufei.ico?v=5.1.2" />






<meta name="description" content="ä¸–ä¹‹å¥‡ä¼Ÿã€ç‘°æ€ªï¼Œéå¸¸ä¹‹è§‚ï¼Œå¸¸åœ¨äºé™©è¿œï¼Œè€Œäººä¹‹æ‰€ç½•è‡³ç„‰ï¼Œæ•…éæœ‰å¿—è€…ä¸èƒ½è‡³ä¹Ÿ">
<meta property="og:type" content="website">
<meta property="og:title" content="Youmai ã® Blog">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="Youmai ã® Blog">
<meta property="og:description" content="ä¸–ä¹‹å¥‡ä¼Ÿã€ç‘°æ€ªï¼Œéå¸¸ä¹‹è§‚ï¼Œå¸¸åœ¨äºé™©è¿œï¼Œè€Œäººä¹‹æ‰€ç½•è‡³ç„‰ï¼Œæ•…éæœ‰å¿—è€…ä¸èƒ½è‡³ä¹Ÿ">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Youmai ã® Blog">
<meta name="twitter:description" content="ä¸–ä¹‹å¥‡ä¼Ÿã€ç‘°æ€ªï¼Œéå¸¸ä¹‹è§‚ï¼Œå¸¸åœ¨äºé™©è¿œï¼Œè€Œäººä¹‹æ‰€ç½•è‡³ç„‰ï¼Œæ•…éæœ‰å¿—è€…ä¸èƒ½è‡³ä¹Ÿ">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/5/"/>





  <title>Youmai ã® Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-63551049-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Youmai ã® Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/20/ä¸ºä»€ä¹ˆæ¬å®¶ä¹‹åæ‰‹æœºåœ°å›¾å®šä½ä»æ˜¯åœ¨åŸæ¥çš„åœ°æ–¹-Google-WiFi-å®šä½çš„åŸç†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/20/ä¸ºä»€ä¹ˆæ¬å®¶ä¹‹åæ‰‹æœºåœ°å›¾å®šä½ä»æ˜¯åœ¨åŸæ¥çš„åœ°æ–¹-Google-WiFi-å®šä½çš„åŸç†/" itemprop="url">æ¬å®¶åæ‰‹æœºåœ°å›¾å®šä½ä»åœ¨åŸæ¥çš„åœ°æ–¹--Google WiFiå®šä½çš„åŸç†</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-20T23:27:32+08:00">
                2015-05-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/é•¿çŸ¥è¯†/" itemprop="url" rel="index">
                    <span itemprop="name">é•¿çŸ¥è¯†</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å‰å‡ å¤©åˆšæ¬å®¶ï¼Œåˆ°äº†æ–°å®¶æ‹¿å‡ºæ‰‹æœºï¼Œå´å‘ç°æ‰‹æœºåœ°å›¾çš„å®šä½è¿˜æ˜¯åœ¨åŸæ¥çš„åœ°æ–¹ï¼Œæ€ä¹ˆé‡æ–°å®šä½éƒ½ä¸å‡†ç¡®ã€‚è¿‡äº†ä¸¤å¤©å´åˆå¥½äº†ï¼Œæˆ‘ä»¥ä¸ºæ˜¯æ­£å¸¸çš„å»¶è¿Ÿæˆ–è€…è¯¯å·®ï¼Œå°±æ²¡æŠŠè¿™äº‹æ”¾åœ¨å¿ƒä¸Šã€‚ä»Šå¤©çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ç»ˆäºæç„¶å¤§æ‚Ÿï¼Œä¸ç¦æ„Ÿå¹ï¼Œç”Ÿæ´»å¤„å¤„æ˜¯å­¦é—®å•Šï¼</p>
<p>åŸæ–‡æ˜¯ä¸€ä½å°æ¹¾åŒè¡Œå†™çš„ï¼Œæ˜¯ç¹ä½“å­—ï¼Œæˆ‘æ”¹æˆäº†ç®€ä½“è´´åœ¨è¿™é‡Œä¸å¤§å®¶å…±äº«ï¼ŒåŸæ–‡åœ¨<a href="http://www.dearhoney.idv.tw/?p=1293" target="_blank" rel="external">è¿™é‡Œ</a></p>
<hr>
<p>ä»¥å‰æˆ‘ä¸äº†è§£Google WiFi å®šä½æ—¶ï¼Œä¸€ç›´å¯¹è¿™æŠ€æœ¯å—¤ä¹‹ä»¥é¼»ï¼Œæˆ‘æƒ³è¯´ä»IP Address å“ªé‡Œèƒ½å®šä½åˆ°å¾ˆç²¾å‡†ï¼Œæœ€å¤šå°±æ˜¯ä»ä¸€äº›å…¬å¼€çš„IP to GEO èµ„æ–™åº“å¯ä»¥æŸ¥è¯¢åˆ°è¿™ä¸ªIP æ˜¯åœ¨é‚£ä¸ªåŸå¸‚ï¼Œæ˜¯æ²¡åŠæ³•ç²¾å‡†å®šä½çš„ã€‚</p>
<p>å¯æ˜¯éšç€æˆ‘å‘ç°æ²¡æœ‰GPS å«æ˜Ÿå®šä½åŠŸèƒ½çš„iPod Touch åœ¨æ‰“å¼€WiFi çš„æƒ…å†µä¸‹ç«Ÿç„¶å¯ä»¥åœ¨Google åœ°å›¾ä¸Šç²¾å‡†åˆ°æˆ‘æ‰€åœ¨åœ°çš„é™„è¿‘ï¼Œè¿™å°±å¼•èµ·äº†æˆ‘å¾ˆå¤§çš„å¥½å¥‡å¿ƒï¼Œåˆ°åº•è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿæ˜¾ç„¶ä¸å¯èƒ½æ˜¯é IP Address å»æŸ¥è¯¢å•Šï¼Ÿ</p>
<p>çœ‹äº†ä¸€äº›ç®€ä½“ä¸ç¹ä½“çš„æ–‡ä»¶ï¼Œå®åœ¨æ˜¯è§‰å¾—æ‰¯å¤ªè¿œæ‰¯å¤ªå¤šï¼Œè¿˜æ˜¯æ²¡çœ‹åˆ°ç²¾é«“å¤„ï¼Œæ‰€ä»¥ç›´æ¥ä»è‹±æ–‡å»æŸ¥å§ï¼æœç„¶æŸ¥åˆ°äº†ä¸å°‘èµ„æ–™ï¼Œä¹Ÿå°±äº†è§£Google WiFi å®šä½çš„åŸç†äº†ã€‚åœ¨è¿™ä¹‹å‰å…ˆæŠŠå‡ ä¸ªåè¯ç»™è§£é‡Šä¸€ä¸‹ã€‚</p>
<p><strong>GPSå«æ˜Ÿå®šä½</strong>ï¼šé çš„æ˜¯ç¯ç»•åœ¨åœ°çƒå››å‘¨çš„æ•°é¢—å«æ˜Ÿå‘é€è®¯å·åˆ°åœ°é¢ï¼Œäº¤å‰è¿é›†å‡ºæ‰€åœ¨åœ°çš„æ–¹æ³•ã€‚ä»åå‡ å¹´å‰å¼€å§‹å‡ºç°æ±½è½¦å¯¼èˆªäº§å“ï¼Œå°±æ˜¯ä½¿ç”¨è¿™ç§æŠ€æœ¯ã€‚åˆæ¬¡å®šä½æ—¶å¸¸è¦èŠ±ä¸Šä¸€åˆ†é’Ÿä»¥ä¸Šçš„æ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æ±½è½¦å¯¼èˆªå’Œæ™ºæ…§å‹æ‰‹æœºéƒ½æœ‰æä¾›çš„å®šä½æ–¹å¼ã€‚å½“æœ‰é®è”½ç‰©é˜»æŒ¡æ¥è‡ªå¤©ç©ºçš„è®¯å·æ—¶å°±ä¼šå‘ç”Ÿå®šä½çš„å›°éš¾ã€‚</p>
<p><strong>A-GPSå®šä½</strong>ï¼šé ç€äº‹å…ˆä¸‹è½½æ˜Ÿå†èµ„æ–™ï¼Œèƒ½å¤ŸåŠ é€Ÿä¸Šè¿°GPSå®šä½çš„åˆæ¬¡å®šä½é€Ÿåº¦ã€‚ç”±äºä¸€èˆ¬è½¦ç”¨å¯¼èˆªæœºéƒ½ä¸å…·å¤‡ç½‘è·¯è¿çº¿èƒ½åŠ›å› æ­¤æ— æ³•äº‹å…ˆä¸‹è½½æ˜Ÿå†èµ„æ–™ï¼Œæ‰€ä»¥ä¹Ÿéƒ½ä¸å…·å¤‡A-GPSå®šä½ã€‚</p>
<p><strong>æ‰‹æœºåŸºåœ°å°å®šä½</strong>ï¼šé çš„æ˜¯ä¾¦æµ‹åˆ°çš„æ‰‹æœºåŸºåœ°å°(Cell Tower)ï¼Œæ¯”å¯¹èµ„æ–™åº“ä»¥åŠä¿¡å·å¼ºåº¦ï¼Œäº¤å‰è¿é›†å‡ºæ‰€åœ¨åœ°çš„æ–¹æ³•ã€‚ä¹Ÿå› ä¸ºè¦èƒ½å¤Ÿä¾¦æµ‹æ‰‹æœºåŸºåœ°å°ï¼Œæ‰€ä»¥ä¸€èˆ¬è½¦ç”¨å¯¼èˆªæœºå› ä¸å…·å¤‡æ‰‹æœºç”µè¯èƒ½åŠ›è€Œæ— æ³• æä¾›ï¼Œå‡ ä¹å¯ä»¥è¯´æ‰‹æœºåŸºåœ°å°å®šä½æ˜¯æ™ºæ…§å‹æ‰‹æœºæˆ–è€…èƒ½å¤Ÿæ’æ‰‹æœºSIMå¡çš„å¹³æ¿ç”µè„‘æ‰å¯ä»¥æä¾›çš„åŠŸèƒ½ã€‚æ­¤æ³•å°šé¡»æœ‰ç½‘è·¯è¿çº¿åšèµ„æ–™åº“æŸ¥è¯¢æ‰èƒ½å®Œæˆå®šä½ã€‚</p>
<p><img src="http://7xj6cl.com1.z0.glb.clouddn.com/GoogleWiFi_CellTower.png" alt="é™„è¿‘æ‰‹æœºåŸºåœ°å°çœŸå¤šå•Š"></p>
<p><strong>WIFIå®šä½</strong>ï¼šé çš„æ˜¯ä¾¦æµ‹é™„è¿‘å‘¨å›´æ‰€æœ‰çš„æ— çº¿ç½‘è·¯åŸºåœ°å°ï¼ˆæ— çº¿æ¥å…¥ç‚¹ï¼‰çš„MACåœ°å€ï¼ˆç±»ä¼¼10-78-D2-93-58-C2è¿™æ ·çš„æ ¼å¼ï¼‰ï¼Œå»æ¯”å¯¹èµ„æ–™åº“ä¸­è¯¥MACåœ°å€çš„åº§æ¨™ï¼Œäº¤å‰é€£é›†å‡ºæ‰€åœ¨åœ°ã€‚æ­¤æ³•å°šé ˆæœ‰ç¶²è·¯é€£ç·šåšè³‡æ–™åº«æŸ¥è©¢æ‰èƒ½å®Œæˆå®šä½ã€‚</p>
<p>æ‰€ä»¥é—®é¢˜æ¥äº†ï¼šè¿™ä»½æ— çº¿ç½‘è·¯åŸºåœ°å°MACåœ°å€å¯¹åº”åˆ°ç»çº¬åº¦çš„èµ„æ–™åº“ï¼Œæ˜¯æ€ä¹ˆå»ºç«‹èµ·æ¥çš„å‘¢ï¼Ÿ</p>
<p>åŸºç¡€å»ºè®¾é çš„æ˜¯è°·æ­Œè¡—æ™¯è½¦ã€‚è°·æ­Œè¡—æ™¯è½¦é™¤äº†æ‹ä¸‹è¡—æ™¯ä»¥å¤–ï¼Œå¦å¤–è¿˜åšäº†ä¸¤ä»¶äº‹æƒ…(ä¿¡æ¯æ¥æºï¼š<a href="http://googlepolicyeurope.blogspot.com/2010/04/data-collected-by-google-cars.html" target="_blank" rel="external">google blog</a>)ï¼š</p>
<p>æ²¿è·¯æœé›†æ‰€æœ‰å…¬å¼€çš„æ— çº¿ç½‘è·¯MACåœ°å€ï¼Œä¸å½“æ—¶çš„ç»çº¬åº¦ä¸€å¹¶è®°å½•ã€‚<br>æ ¹æ®æ‹ä¸‹çš„è¡—æ™¯æ¥å»ºç«‹å»ºç­‘ç‰©çš„3Dæ¨¡å‹èµ„æ–™ã€‚</p>
<p><img src="http://7xj6cl.com1.z0.glb.clouddn.com/GoogleWiFi_3Dbuilding.png" alt="æ­¤æ•ˆæœæˆªè‡³æœ¬æ–‡åˆŠå‡ºæ—¶ä»…èƒ½åœ¨è°·æ­ŒAndroidæ‰‹æœºä¸Šçœ‹åˆ°"></p>
<p>ä½†è³‡æ–™åº«ä¸€å®šæœƒé¢è‡¨éæœŸèˆ‡éœ€è¦æ›´æ–°çš„å•é¡Œï¼Œé€™æ™‚å€™å…¨ä¸–ç•Œæœ‰åœ¨ä½¿ç”¨è¡Œå‹•è£ç½®è°·æ­Œ+å®šä½ç¨‹å¼çš„äººï¼Œç­‰äºæ˜¯åœ¨ä¸çŸ¥ä¸è§‰ä¸­å¸®å¿™åšè¿™ä»¶äº‹æƒ…ã€‚æ›´æ–°çš„æ–¹æ³•æ˜¯å½“æ— çº¿ç½‘ç»œä¸æ‰‹æœºåŸºåœ°å°å®šä½æˆ–GPSå®šä½åŒæ—¶å¼€å¯æ—¶ï¼Œæ‰‹æŒè£…ç½®è—‰ç”±æ‰‹æœºåŸºåœ°å°å®šä½æˆ–GPSå®šä½è¿™ä¸¤ç§æ–¹å¼å¯ä»¥è·å¾—ç›®å‰çš„åº§æ ‡ï¼Œå†é€è¿‡æ— çº¿ç½‘ç»œæœå¯»åˆ°é™„è¿‘æ‰€æœ‰çš„MACåœ°å€ï¼ŒèƒŒåå‘è°·æ­Œçš„èµ„æ–™åº“åšæ›´æ–°ã€‚ï¼ˆä¿¡æ¯æ¥æºï¼š<a href="http://www.google.com/support/forum/p/Google%20Mobile/thread?tid=6bef39e72c3abbb5&amp;hl=en" target="_blank" rel="external">è°·æ­Œå‘˜å·¥å…‹é‡Œæ–¯æ‰˜å¼—çš„å…¬å¼€è¯´æ³•</a>ï¼‰</p>
<p>èªªç©¿äº†æŠ€è¡“å…¶å¯¦ä¸é›£ï¼Œä½†é€™éº¼é¾å¤§çš„è³‡æ–™åº«ï¼Œåˆèƒ½å¤ ä¸ç—›ä¸ç™¢çš„è™Ÿå¬æ¯å€‹è¡Œå‹•è£ç½®å¹«å¿™æ›´æ–°ç¶­è­·é€™ä»½è³‡æ–™åº«ï¼Œå¤§æ¦‚ä¹Ÿåªæœ‰è°·æ­Œåšå¾—æ¥äº†ã€‚</p>
<p>çŸ¥é“äº†åŸç†ä¹‹åï¼Œè¡ç”Ÿå‡ºæ¥çš„å°±æ˜¯ä¸€äº›éšç§æƒçš„é—®é¢˜ã€‚</p>
<p>é¦–å…ˆå°±æ˜¯è°·æ­Œæœé›†æ— çº¿ç½‘ç»œçš„MACåœ°å€èµ„è®¯åˆæ³•å—ï¼Ÿå¾·å›½æ”¿åºœå»å¹´å¯¹æ­¤æå‡ºç–‘è™‘ï¼Œè€Œè°·æ­Œè®¤ä¸ºåˆæ³•ï¼Œä¸¤é€ åæ¥æ€ä¹ˆæ ·äº†æˆ‘æ‡’å¾—å»è¿½ï¼Œåæ­£ä»æŠ€æœ¯ä¸Šæ¥çœ‹ï¼ŒMACåœ°å€åœ¨ç¶²è·¯ä¸Šè¦èƒ½å¤ è¢«æŸ¥è©¢åˆ°ï¼Œé‚£éº¼ä½ èˆ‡å°æ–¹ä¹‹é–“ä¸èƒ½æœ‰è·¯ç”±å™¨å­˜åœ¨ï¼Œä¸€æ—¦éäº†è·¯ç”±å™¨é‚£éº¼åŸå§‹MACåœ°å€å°±æœƒè¢«æ›¿æ›(è©³ç´°çš„åŸç†é€™é‚Šå°±ä¸å¤šèªªäº†)ï¼Œæ‰€ä»¥ä¸€èˆ¬äººé›–ç„¶å¯ä»¥ç”¨å¾ˆå¤šæ–¹æ³•å»æ‰¾å‡ºå°æ–¹çš„IPåœ°å€ï¼Œä½†å¯¹æ–¹çš„MACåœ°å€å°±æ²¡åŠæ³•äº†ï¼Œä¸­é—´ç»è¿‡çš„è·¯ç”±å™¨å¤ªå¤šå•¦ï¼ä¹Ÿå°±æ— æ³•åˆ©ç”¨MACåœ°å€å»æŸ¥å°æ–¹èº«è™•ä½•è™•ã€‚é™¤éå°‡æœ¨é¦¬æ¤å…¥å°æ–¹é›»è…¦ä¾†å›å ±ï¼Œä¸”å°æ–¹æœ‰åœ¨ä½¿ç”¨ç„¡ç·šç¶²è·¯è€Œä¸”ä»–é™„è¿‘çš„ç„¡ç·šç¶²è·¯åŸºåœ°å°æœ‰è¢«ç™»è¨˜åˆ°è°·æ­Œè³‡æ–™åº«ä¸­ï¼Œé‚£æ‰æœ‰æ©Ÿæœƒæ‰¾åˆ°å°æ–¹æ‰€åœ¨åœ°é™„è¿‘ï¼Œä½†é€™é›£åº¦åˆé«˜æ¢ä»¶åˆå¤šï¼Œå°è­¦å¯Ÿä¾†èªªé‚„æ˜¯ç”¨IPåœ°å€è¡Œæ–‡æ³•é™¢ä¸ç”µä¿¡ä¸šè€…æ¥æ‰¾ç²¾ç¡®çš„åœ°å€æœ€å¿«ã€‚</p>
<p>æ‰€ä»¥å›å¤´æ¥è¯´éšç§æƒï¼Œæˆ‘ä¸ªäººè§‰å¾—åº”è¯¥æ˜¯ä¸ä¼šï¼Œä¸”æ— çº¿ç½‘ç»œçš„MACåœ°å€æ˜¯å±¬æ–¼å…¬é–‹è³‡è¨Šï¼Œä¸¦éåˆ»æ„ç”¨ä»€éº¼éæ³•æ‰‹æ®µæ‰èƒ½å–å¾—ã€‚ä¸€èˆ¬äººå°±ç®—æ¢æ¸¬åˆ°ä½ çš„MACåœ°å€ï¼Œä¹Ÿä¸æ™“å¾—ä½ æ˜¯è°æˆ–ä»€ä¹ˆäººåœ¨ä½¿ç”¨ã€‚</p>
<p>å†æ¥å°±æ˜¯å®šä½é”™è¯¯çš„é—®é¢˜ã€‚</p>
<p>æ¬å®¶åå…¶æ— çº¿ç½‘è·¯åŸºåœ°å°ä¹Ÿè·Ÿç€ç§»åŠ¨ï¼Œé‚£ä¹ˆä»¥æ— çº¿ç½‘ç»œå®šä½ä¾†çœ‹è‡ªå·±èº«åœ¨ä½•è™•ï¼Œå¯èƒ½æœƒå‘ˆç¾ä»ç„¶åœ¨ä¸Šä¸€å€‹ä½æ‰€çš„å•é¡Œã€‚é‡å°é€™ç¨®å› ç‚ºè³‡æ–™åº«å°šæœªè¢«æ›´æ–°è€Œç”¢ç”Ÿçš„å®šä½éŒ¯èª¤å•é¡Œï¼ŒGoogleæä¾›äº†ä¸€ä¸ª<a href="https://services.google.com/fb/forms/wifibugs/" target="_blank" rel="external">æ— çº¿ç½‘è·¯å®šä½é”™è¯¯çš„è¡¨æ ¼</a>æ¥ç”³è¯·å›æŠ¥ï¼Œä½†ä¸€å¦‚ä¸€èˆ¬è°·æ­Œçš„æœå‹™ä¸€æ¨£ï¼Œé€™è¡¨æ ¼ä¸¦ä¸èƒ½ä¿è­‰ç«‹å³å¾—åˆ°å›æ‡‰ã€‚æƒ³è¦åŠ é€Ÿæ›´æ–°è³‡æ–™åº«ï¼Œé™¤äº†å¡«å¯«é€™ä»½è¡¨æ ¼ä»¥å¤–ï¼Œå¦å¤–å°±æ˜¯è‡ªå·±æ™‚å¸¸æ‹¿è¡Œå‹•è£ç½®é–‹è‘—æ— çº¿+ GPSå®šä½å§ï¼Œè¿™æ˜¯åˆšæ‰æè¿‡çš„èµ„æ–™åº“æ›´æ–°æ³•ï¼Œæ€»æœ‰ä¸€å¤©è°·æ­Œä¼šå› ä¸ºä½ ä¸è¡ŒåŠ¨è£…ç½®çš„åŠªåŠ›è€Œä¿®æ­£è¿‡æ¥çš„ã€‚ğŸ˜›</p>
<p>å›å¤´çœ‹æˆ‘ä¸€å¼€å§‹ä»¥ä¸ºè°·æ­Œçš„WiFiå®šä½æ˜¯é ç€IPåœ°å€æ¥å®šä½ï¼ŒçœŸæ˜¯å¤§é”™ç‰¹é”™äº†å•Šï¼è°·æ­Œè¦çš„åªæ˜¯ä¾¦æµ‹åˆ°æ— çº¿åŸºåœ°å°çš„MACåœ°å€å°±å¯ä»¥ï¼Œä¹Ÿæ²¡æœ‰å¼ºè°ƒä¸€å®šè¦ä¸æ— çº¿åŸºåœ°å°è¿çº¿ï¼Œåªè¦æ‰“å¼€è¡ŒåŠ¨è£…ç½®çš„æ— çº¿ç½‘ç»œåŠŸèƒ½ï¼Œè®©è°·æ­Œå®šä½å¯ä»¥è—‰ç”±æ— çº¿å»æœé›†é™„è¿‘å¯ä¾¦æµ‹çš„MACåœ°å€ï¼Œæ¥ç€é€è¿‡3Gè¡ŒåŠ¨ä¸Šç½‘æˆ–æ­¤æ—¶ä½ çœŸçš„æœ‰æ— çº¿ç½‘ç»œè¿çº¿ï¼Œå°±å¯ä»¥å»å‘è°·æ­Œèµ„æ–™åº“æŸ¥è¯¢è¿™äº›MACåœ°å€è¿é›†èµ·æ¥çš„å¯èƒ½ä½ç½®ï¼Œå°±è¿™æ ·å®Œæˆå®šä½äº†ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/19/ç¿»è¯‘-pythonæ‹›è˜æŒ‡å—/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/19/ç¿»è¯‘-pythonæ‹›è˜æŒ‡å—/" itemprop="url">[ç¿»è¯‘]pythonæ‹›è˜æŒ‡å—</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-19T20:52:20+08:00">
                2015-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åŸæ–‡åœ¨<a href="http://www.toptal.com/python/#hiring-guide" target="_blank" rel="external">è¿™é‡Œtoptal</a></p>
<p>##pythonä¸“å®¶or Snake in the Grass?</p>
<p><img src="http://7xj6cl.com1.z0.glb.clouddn.com/toptal-blog-image.png" alt=""></p>
<p>ä½ å·²ç»å‘ç°ä»€ä¹ˆæ ·çš„è¡¨ç°æ˜¯ä¸€ä¸ªpythoné«˜æ‰‹ã€‚ä½†æ˜¯åœ¨ä½ è¯¥å¦‚ä½•ç¡®å®šä½ çš„top 1%ç²¾è‹±å€™é€‰è€…ä¹Ÿæ˜¯å‘¢ï¼Ÿå°½ç®¡æ²¡æœ‰é­”æ³•æˆ–è€…ä¸‡æ— ä¸€å¤±çš„æŠ€æœ¯ï¼Œä½†æ˜¯ç¡®å®æœ‰ä¸€äº›é—®é¢˜å¯ä»¥å¸®åŠ©ä½ ç¡®å®šå€™é€‰è€…å¯¹è¿™é—¨è¯­è¨€è®¤è¯†çš„æ·±åº¦ã€‚ä¸‹é¢ç®€è¦åœ°åˆ—ä¸¾äº†ä¸€äº›è¿™æ ·çš„é—®é¢˜ã€‚</p>
<p><strong>é‡è¦çš„æ˜¯ï¼Œè¿™äº›æ ·é¢˜ä»…ä»…æ—¨åœ¨ä½œä¸ºæŒ‡å¯¼ã€‚ä¸æ˜¯æ‰€æœ‰çš„å€¼å¾—æ‹›è˜çš„â€œAâ€çº§å€™é€‰äººéƒ½èƒ½æ­£ç¡®åœ°å›ç­”æ‰€æœ‰è¿™äº›é—®é¢˜ã€‚åŒæ ·ï¼Œèƒ½æ­£ç¡®å›ç­”æ‰€æœ‰é—®é¢˜ä¹Ÿä¸èƒ½ä¿è¯ä»–/å¥¹å°±æ˜¯ä¸€ä¸ªâ€œAâ€çº§å€™é€‰äººã€‚æ‹›è˜æ˜¯ä¸€é—¨ç§‘å­¦ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸€é—¨è‰ºæœ¯ã€‚</strong></p>
<p>##æ‚è‰ä¸­çš„èŸ’è›‡â€¦</p>
<p>å°½ç®¡ç¡®å®æœ€ä¼˜ç§€çš„å¼€å‘è€…ä¸ä¼šæµªè´¹æ—¶é—´è®°ä½ä¸€äº›èƒ½è½»æ˜“åœ¨è¯­è¨€æ‰‹å†Œæˆ–è€…APIæ–‡æ¡£ä¸­æ‰¾åˆ°çš„çŸ¥è¯†ï¼Œä½†æ˜¯ï¼Œä»ç„¶æœ‰ä¸€äº›å…³é”®çš„ç‰¹æ€§å’Œèƒ½åŠ›ï¼Œä»»ä½•ç¼–ç¨‹è¯­è¨€çš„æ¯ä¸ªä¸“å®¶éƒ½èƒ½ï¼Œå¹¶ä¸”åº”è¯¥<br>ç²¾é€šã€‚è¿™é‡Œå°±æ˜¯ä¸€äº›pythonç‰¹å®šçš„ä¾‹å­ã€‚</p>
<p>###Qï¼šä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°è£…é¥°å™¨ï¼Ÿè¯·ä¸¾ä¾‹</p>
<p>è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ç”¨æ¥ä¿®æ”¹ï¼Œæ‰©å±•å‡½æ•°æˆ–ç±»å®šä¹‰çš„å¯è°ƒç”¨Pythonå¯¹è±¡ã€‚è£…é¥°å™¨çš„ä¸€ä¸ªç¾ä¸½ä¹‹å¤„æ˜¯ï¼Œå•ä¸ªè£…é¥°å™¨å®šä¹‰å¯ä½œç”¨äºå¤šç§å‡½æ•°ï¼ˆæˆ–ç±»ï¼‰ã€‚å¤§éƒ¨åˆ†åŠŸèƒ½ä»è€Œå¯ä»¥ç”¨è£…é¥°å™¨å®ç°ï¼Œå¦åˆ™å°†éœ€è¦å¤§é‡çš„æ ·æ¿ï¼ˆæˆ–æ›´ç³Ÿå¤šä½™çš„ï¼ï¼‰ä»£ç ã€‚ä¾‹å¦‚<a href="http://flask.pocoo.org/" target="_blank" rel="external">Flask</a>ï¼Œä½¿ç”¨è£…é¥°å™¨çš„æœºåˆ¶æ¥æ·»åŠ æ–°çš„ç«¯ç‚¹åˆ°webåº”ç”¨ç¨‹åºã€‚ä¸€äº›è£…é¥°å™¨çš„æ›´å¸¸è§çš„ç”¨é€”åŒ…æ‹¬ï¼šå¢åŠ åŒæ­¥ï¼Œç±»å‹å¼ºåˆ¶æ‰§è¡Œï¼Œæ—¥å¿—ï¼Œæˆ–å‰/åæ¡ä»¶åˆ°ä¸€ä¸ªç±»æˆ–å‡½æ•°ã€‚</p>
<p>###Qï¼šä»€ä¹ˆæ˜¯lambdaè¡¨è¾¾å¼ï¼Œåˆ—è¡¨è§£æå’Œç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼Ÿå„æœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œé€‚å½“çš„ç”¨é€”ï¼Ÿ</p>
<p>lambdaè¡¨è¾¾å¼æ˜¯ä¸€ç§å¿«é€Ÿåˆ›å»ºå•è¡ŒåŒ¿åå‡½æ•°çš„æ–¹æ³•ã€‚å®ƒçš„ç®€å•ï¼Œå†…è”çš„æœ¬è´¨å¾€å¾€-è™½ç„¶ä¸æ˜¯æ€»æ˜¯-å¯ä»¥è®©ä»£ç æ¯”ç”¨æ­£å¸¸å‡½æ•°å®šä¹‰æ–¹æ³•æ›´åŠ å¯è¯»å’Œç®€æ´ã€‚ä½†å¦ä¸€æ–¹é¢ï¼Œå®ƒçš„å†…è”æœ¬è´¨ä¹Ÿæå¤§åœ°é™åˆ¶äº†å®ƒèƒ½åšçš„äº‹æƒ…ã€‚Being anonymous and inline, the only way to use the same lambda function in multiple locations in your code is to specify it redundantly.</p>
<p>List comprehensions provide a concise syntax for creating lists. List comprehensions are commonly used to make lists where each element is the result of some operation(s) applied to each member of another sequence or iterable. They can also be used to create a subsequence of those elements whose members satisfy a certain condition. In Python, list comprehensions provide an alternative to using the built-in map() and filter() functions.</p>
<p>As the applied usage of lambda expressions and list comprehensions can overlap, opinions vary widely as to when and where to use one vs. the other. One point to bear in mind, though, is that a list comprehension executes somewhat faster than a comparable solution using map and lambda (some quick tests yielded a performance difference of roughly 10%). This is because calling a lambda function creates a new stack frame while the expression in the list comprehension is evaluated without doing so.</p>
<p>Generator expressions are syntactically and functionally similar to list comprehensions but there are some fairly significant differences between the ways the two operate and, accordingly, when each should be used. In a nutshell, iterating over a generator expression or list comprehension will essentially do the same thing, but the list comprehension will create the entire list in memory first while the generator expression will create the items on the fly as needed. Generator expressions can therefore be used for very large (and even infinite) sequences and their lazy (i.e., on demand) generation of values results in improved performance and lower memory usage. It is worth noting, though, that the standard Python list methods can be used on the result of a list comprehension, but not directly on that of a generator expression.</p>
<p>###Qï¼šè€ƒè™‘ä¸‹é¢åˆå§‹åŒ–åˆ—è¡¨çš„ä¸¤ç§æ–¹æ³•å’Œäº§ç”Ÿçš„åˆ—è¡¨ã€‚æ‰€äº§ç”Ÿçš„åˆ—è¡¨å°†å¦‚ä½•ä¸åŒï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ä¸€åˆå§‹åŒ–æ–¹æ³•è€Œä¸æ˜¯å¦ä¸€ä¸ªï¼Ÿ</p>
<pre><code>&gt;&gt;&gt; # INITIALIZING AN ARRAY -- METHOD 1
...
&gt;&gt;&gt; x = [[1,2,3,4]] * 3
&gt;&gt;&gt; x
[[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]]
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; # INITIALIZING AN ARRAY -- METHOD 2
...
&gt;&gt;&gt; y = [[1,2,3,4] for _ in range(3)]
&gt;&gt;&gt; y
[[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]]
&gt;&gt;&gt;
&gt;&gt;&gt; # WHICH METHOD SHOULD YOU USE AND WHY?
</code></pre><p>è™½ç„¶è¿™ä¸¤ç§æ–¹æ³•ä¹ä¸€çœ‹äº§ç”Ÿçš„ç»“æœç›¸åŒï¼Œä½†ä¸¤è€…ä¹‹é—´çš„å·®å¼‚æå…¶æ˜¾è‘—ã€‚å¦‚ä½ æ‰€æ–™ï¼Œæ–¹æ³•2äº§ç”Ÿæœ‰3ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æœ¬èº«å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„4å…ƒç´ çš„åˆ—è¡¨ã€‚ç„¶è€Œï¼Œåœ¨æ–¹æ³•1ä¸­ï¼Œåˆ—è¡¨çš„å…ƒç´ (4å…ƒç´ åˆ—è¡¨)éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¼šå¯¼è‡´æˆ‘ä»¬æœ€å§‹æ–™æœªåŠå’Œæœ€ä¸å¸Œæœ›çš„è¡Œä¸ºï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code>&gt;&gt;&gt; # MODIFYING THE x ARRAY FROM THE PRIOR CODE SNIPPET:
&gt;&gt;&gt; x[0][3] = 99
&gt;&gt;&gt; x
[[1, 2, 3, 99], [1, 2, 3, 99], [1, 2, 3, 99]]
&gt;&gt;&gt; # UH-OH, DONâ€™T THINK YOU WANTED THAT TO HAPPEN!
...
&gt;&gt;&gt;
&gt;&gt;&gt; # MODIFYING THE y ARRAY FROM THE PRIOR CODE SNIPPET:
&gt;&gt;&gt; y[0][3] = 99
&gt;&gt;&gt; y
[[1, 2, 3, 99], [1, 2, 3, 4], [1, 2, 3, 4]]
&gt;&gt;&gt; # THATâ€™S MORE LIKE WHAT YOU EXPECTED!
...
</code></pre><p>###Qï¼š ä¸‹é¢çš„ç¬¬äºŒä¸ªappend()è¯­å¥è¾“å‡ºä»€ä¹ˆï¼Ÿ</p>
<pre><code>&gt;&gt;&gt; def append(list=[]):
...     # append the length of a list to the list
...     list.append(len(list))
...     return list
...
&gt;&gt;&gt; append([&apos;a&apos;,&apos;b&apos;])
[&apos;a&apos;, &apos;b&apos;, 2]
&gt;&gt;&gt;
&gt;&gt;&gt; append()  # calling with no arg uses default list value of []
[0]
&gt;&gt;&gt;
&gt;&gt;&gt; append()  # but what happens when we AGAIN call append with no arg?
</code></pre><p>å¦‚æœä¸€ä¸ªå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿™ä¸ªè¡¨è¾¾å¼ä»…è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨éƒ½è¢«æ‰§è¡Œã€‚å› æ­¤ï¼Œä¸€æ—¦åˆ—è¡¨å‚æ•°å·²ç»è¢«åˆå§‹åŒ–ä¸ºäº†ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œåç»­è°ƒç”¨appendå‡½æ•°æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šå‚æ•°listï¼Œå°†ä¼šç»§ç»­ä½¿ç”¨ä¹‹å‰åˆå§‹åŒ–çš„åŒä¸€ä¸ªåˆ—è¡¨ã€‚è¿™ä¼šå¼•èµ·ä¸‹é¢çš„æ„å¤–è¡Œä¸ºï¼š</p>
<pre><code>&gt;&gt;&gt; append()  # first call with no arg uses default list value of []
[0]
&gt;&gt;&gt; append()  # but then look what happens...
[0, 1]
&gt;&gt;&gt; append()  # successive calls keep extending the same default list!
[0, 1, 2]
&gt;&gt;&gt; append()  # and so on, and so on, and so on...
[0, 1, 2, 3]
</code></pre><p>###Qï¼šåœ¨ä¸Šè¿°é—®é¢˜ä¸­ï¼Œå¦‚ä½•ä¿®æ”¹appendæ–¹æ³•çš„å®ç°æ¥é¿å…æè¿°çš„ä¸å½“è¡Œä¸ºï¼Ÿ</p>
<p>ä¸‹é¢çš„appendæ–¹æ³•çš„æ›¿ä»£å®ç°æ˜¯é¿å…ä¸Šè¿°é—®é¢˜ç­”æ¡ˆæè¿°çš„ä¸å½“è¡Œä¸ºçš„ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<pre><code>&gt;&gt;&gt; def append(list=None):
...     if list is None:
            list = []
        # append the length of a list to the list
...     list.append(len(list))
...     return list
...
&gt;&gt;&gt; append()
[0]
&gt;&gt;&gt; append()
[0]
</code></pre><p>###Qï¼šå¦‚ä½•ç”¨ä¸€è¡Œpythonä»£ç äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Ÿ</p>
<p>è€ƒè™‘è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code>&gt;&gt;&gt; x = &apos;X&apos;
&gt;&gt;&gt; y = &apos;Y&apos;
</code></pre><p>åœ¨å¾ˆå¤šè¯­è¨€ä¸­ï¼Œäº¤æ¢xå’Œyçš„å€¼éœ€è¦ä½ è¿›è¡Œä»¥ä¸‹çš„æ“ä½œï¼š</p>
<pre><code>&gt;&gt;&gt; tmp = x
&gt;&gt;&gt; x = y
&gt;&gt;&gt; y = tmp
&gt;&gt;&gt; x, y
(&apos;Y&apos;, &apos;X&apos;)
</code></pre><p>ä½†æ˜¯åœ¨pythonä¸­ï¼Œä½ å¯ä»¥ç”¨ä¸€è¡Œä»£ç å®ŒæˆswapåŠŸèƒ½ï¼ˆæ„Ÿè°¢å…ƒç»„éšå¼çš„æ‰“åŒ…å’Œè§£åŒ…ï¼‰</p>
<pre><code>&gt;&gt;&gt; x,y = y,x
&gt;&gt;&gt; x,y
(&apos;Y&apos;, &apos;X&apos;)
</code></pre><p>###Qï¼šä¸‹é¢ä»£ç ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<pre><code>&gt;&gt;&gt; flist = []
&gt;&gt;&gt; for i in range(3):
...     flist.append(lambda: i)
...
&gt;&gt;&gt; [f() for f in flist]   # what will this print out?
</code></pre><p>åœ¨Pythonçš„é—­åŒ…ä¸­ï¼Œå˜é‡éƒ½æ˜¯é€šè¿‡åå­—æ¥ç»‘å®šã€‚å› æ­¤ï¼Œä¸Šé¢ä»£ç çš„è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>[2, 2, 2]
</code></pre><p>å¯èƒ½å¹¶ä¸æ˜¯ä»£ç çš„ä½œè€…é¢„æ–™çš„ç»“æœ!</p>
<p>ä¸€ä¸ªæ›¿ä»£æ–¹æ³•æ˜¯ï¼šå¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ï¼Œæˆ–è€…é€šè¿‡åå­—ä¼ é€’å‚æ•°ï¼›æ¯”å¦‚ï¼š</p>
<pre><code>&gt;&gt;&gt; flist = []
&gt;&gt;&gt; for i in range(3):
...     flist.append(lambda i = i : i)
...
&gt;&gt;&gt; [f() for f in flist]
[0, 1, 2]
</code></pre><p>###Q: Python2å’Œ3ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å°½ç®¡Python2ç°åœ¨è¢«è®¤ä¸ºæ˜¯é—ç•™ä¹‹ç‰©ï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªå¼€å‘è€…æ¥è¯´ï¼Œå› ä¸ºPython2ä½¿ç”¨å¹¿æ³›ï¼ŒçŸ¥é“Python2å’ŒPython3ä¹‹é—´çš„åŒºåˆ«æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<p>è¿™é‡Œæ˜¯å¼€å‘è€…åº”è¯¥äº†è§£çš„ä¸€äº›å…³é”®å·®å¼‚ï¼š</p>
<p>Text and Data instead of Unicode and 8-bit strings. Python 3.0 uses the concepts of text and (binary) data instead of Unicode strings and 8-bit strings. The biggest ramification of this is that any attempt to mix text and data in Python 3.0 raises a TypeError (to combine the two safely, you must decode bytes or encode Unicode, but you need to know the proper encoding, e.g. UTF-8)</p>
<p>This addresses a longstanding pitfall for naÃ¯ve Python programmers. In Python 2, mixing Unicode and 8-bit data would work if the string happened to contain only 7-bit (ASCII) bytes, but you would get UnicodeDecodeError if it contained non-ASCII values. Moreover, the exception would happen at the combination point, not at the point at which the non-ASCII characters were put into the str object. This behavior was a common source of confusion and consternation for neophyte Python programmers.</p>
<p>printå‡½æ•°. <code>printè¡¨è¾¾å¼</code>å·²ç»è¢«ä¸€ä¸ª<code>print()å‡½æ•°</code>æ›¿ä»£</p>
<p>xrange â€“ buh-bye. <code>xrange()</code>ä¸å†å­˜åœ¨(<code>range()</code>ç°åœ¨çš„æ•ˆæœå’Œ<code>xrange()</code>ä¸€æ ·ï¼Œexcept it works with values of arbitrary size) </p>
<p><strong>API changes</strong>:</p>
<ul>
<li><p>zip(), map() and filter() all now return iterators instead of lists</p>
</li>
<li><p>dict.keys(), dict.items() and dict.values() now return â€œviewsâ€ instead of lists</p>
</li>
<li><p>dict.iterkeys(), dict.iteritems() and dict.itervalues() are no longer supported</p>
</li>
<li><p>Comparison operators. The ordering comparison operators (&lt;, &lt;=, &gt;=, &gt;) now raise a TypeError exception when the operands donâ€™t have a meaningful natural ordering. Some examples of the ramifications of this include:</p>
</li>
</ul>
<blockquote>
<p>Expressions like 1 &lt; â€˜â€™, 0 &gt; None or len &lt;= len are no longer valid<br>None &lt; None now raises a TypeError instead of returning False</p>
</blockquote>
<ul>
<li>Sorting a heterogeneous list no longer makes sense â€“ all the elements must be comparable to each other</li>
</ul>
<p>æ›´å¤šå…³äºPython2å’ŒPython3çš„åŒºåˆ«å¯ä»¥å‚è€ƒ<a href="https://docs.python.org/3/whatsnew/3.0.html" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p>###Q: Pythonæ˜¯è§£é‡Šå‹çš„è¿˜æ˜¯ç¼–è¯‘å‹çš„ï¼Ÿ</p>
<p>As noted in Why Are There So Many Pythons?, this is, frankly, a bit of a trick question in that it is malformed. Python itself is nothing more than an interface definition (as is true with any language specification) of which there are multiple implementations. Accordingly, the question of whether â€œPythonâ€ is interpreted or compiled does not apply to the Python language itself; rather, it applies to each specific implementation of the Python specification.</p>
<p>Further complicating the answer to this question is the fact that, in the case of CPython (the most common Python implementation), the answer really is â€œsort of bothâ€. Specifically, with CPython, code is first compiled and then interpreted. More precisely, it is not precompiled to native machine code, but rather to bytecode. While machine code is certainly faster, bytecode is more portable and secure. The bytecode is then interpreted in the case of CPython (or both interpreted and compiled to optimized machine code at runtime in the case of PyPy).</p>
<p>###Q: æœ‰å“ªäº›CPythonçš„æ›¿ä»£å®ç°ï¼Ÿä»€ä¹ˆæ—¶å€™ï¼Œä¸ºä»€ä¹ˆä¼šä½¿ç”¨ä»–ä»¬ï¼Ÿ</p>
<p>One of the more prominent alternative implementations is Jython, a Python implementation written in Java that utilizes the Java Virtual Machine (JVM). While CPython produces bytecode to run on the CPython VM, Jython produces Java bytecode to run on the JVM.</p>
<p>Another is IronPython, written in C# and targeting the .NET stack. IronPython runs on Microsoftâ€™s Common Language Runtime (CLR).</p>
<p>As also pointed out in Why Are There So Many Pythons?, it is entirely possible to survive without ever touching a non-CPython implementation of Python, but there are advantages to be had from switching, most of which are dependent on your technology stack.</p>
<p>Another noteworthy alternative implementation is PyPy whose key features include:</p>
<p>Speed. Thanks to its Just-in-Time (JIT) compiler, Python programs often run faster on PyPy.</p>
<p>Memory usage. Large, memory-hungry Python programs might end up taking less space with PyPy than they do in CPython.</p>
<p>Compatibility. PyPy is highly compatible with existing python code. It supports cffi and can run popular Python libraries like Twisted and Django.</p>
<p>Sandboxing. PyPy provides the ability to run untrusted code in a fully secure way.</p>
<p>Stackless mode. PyPy comes by default with support for stackless mode, providing micro-threads for massive concurrency.</p>
<p>###Q: Whatâ€™s your approach to unit testing in Python?</p>
<p>The most fundamental answer to this question centers around Pythonâ€™s unittest testing framework. Basically, if a candidate doesnâ€™t mention unittest when answering this question, that should be a huge red flag.</p>
<p>unittest supports test automation, sharing of setup and shutdown code for tests, aggregation of tests into collections, and independence of the tests from the reporting framework. The unittest module provides classes that make it easy to support these qualities for a set of tests.</p>
<p>Assuming that the candidate does mention unittest (if they donâ€™t, you may just want to end the interview right then and there!), you should also ask them to describe the key elements of the unittest framework; namely, test fixtures, test cases, test suites and test runners.</p>
<p>A more recent addition to the unittest framework is mock. mock allows you to replace parts of your system under test with mock objects and make assertions about how they are to be used. mock is now part of the Python standard library, available as unittest.mock in Python 3.3 onwards.</p>
<p>The value and power of mock are well explained in An Introduction to Mocking in Python. As noted therein, system calls are prime candidates for mocking: whether writing a script to eject a CD drive, a web server which removes antiquated cache files from /tmp, or a socket server which binds to a TCP port, these calls all feature undesired side-effects in the context of unit tests. Similarly, keeping your unit-tests efficient and performant means keeping as much â€œslow codeâ€ as possible out of the automated test runs, namely filesystem and network access.</p>
<hr>
<p>####[æ³¨æ„:è¿™ä¸ªé—®é¢˜é’ˆå¯¹çš„æ˜¯åŒæ ·æœ‰javaå¼€å‘ç»éªŒçš„pythonå¼€å‘è€….]</p>
<p>###Q: What are some key differences to bear in mind when coding in Python vs. Java?</p>
<p>Disclaimer #1. The differences between Java and Python are numerous and would likely be a topic worthy of its own (lengthy) post. Below is just a brief sampling of some key differences between the two languages.</p>
<p>Disclaimer #2. The intent here is not to launch into a religious battle over the merits of Python vs. Java (as much fun as that might be!). Rather, the question is really just geared at seeing how well the developer understands some practical differences between the two languages. The list below therefore deliberately avoids discussing the arguable advantages of Python over Java from a programming productivity perspective.</p>
<p>With the above two disclaimers in mind, here is a sampling of some key differences to bear in mind when coding in Python vs. Java:</p>
<p>Dynamic vs static typing. One of the biggest differences between the two languages is that Java is restricted to static typing whereas Python supports dynamic typing of variables.</p>
<p>Static vs. class methods. A static method in Java does not translate to a Python class method.</p>
<p>In Python, calling a class method involves an additional memory allocation that calling a static method or function does not.</p>
<p>In Java, dotted names (e.g., foo.bar.method) are looked up by the compiler, so at runtime it really doesnâ€™t matter how many of them you have. In Python, however, the lookups occur at runtime, so â€œeach dot countsâ€.</p>
<p>Method overloading. Whereas Java requires explicit specification of multiple same-named functions with different signatures, the same can be accomplished in Python with a single function that includes optional arguments with default values if not specified by the caller.</p>
<p>Single vs. double quotes. Whereas the use of single quotes vs. double quotes has significance in Java, they can be used interchangeably in Python (but no, it wonâ€™t allow beginnning the same string with a double quote and trying to end it with a single quote, or vice versa!).</p>
<p>Getters and setters (not!). Getters and setters in Python are superfluous; rather, you should use the â€˜propertyâ€™ built-in (thatâ€™s what itâ€™s for!). In Python, getters and setters are a waste of both CPU and programmer time.</p>
<p>Classes are optional. Whereas Java requires every function to be defined in the context of an enclosing class definition, Python has no such requirement.</p>
<p>Indentation mattersâ€¦ in Python. This bites many a newbie Python programmer.</p>
<p><strong>The Big Picture</strong></p>
<p>An expert knowledge of Python extends well beyond the technical minutia of the language. A Python expert will have an in-depth understanding and appreciation of Pythonâ€™s benefits as well as its limitations. Accordingly, here are some sample questions that can help assess this dimension of a candidateâ€™s expertise:</p>
<p>###Q: What is Python particularly good for? When is using Python the â€œright choiceâ€ for a project?</p>
<p>Although likes and dislikes are highly personal, a developer who is â€œworth his or her saltâ€ will highlight features of the Python language that are generally considered advantageous (which also helps answer the question of what Python is â€œparticularly good forâ€). Some of the more common valid answers to this question include:</p>
<p>ä¾¿äºä½¿ç”¨å’Œé‡æ„ï¼Œæ„Ÿè°¢Pythonçµæ´»çš„è¯­æ³•ï¼Œè®©å®ƒåœ¨å¿«é€Ÿå»ºæ¨¡æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<p>æ›´å¤šç®€æ´çš„ä»£ç ï¼Œå†æ¬¡æ„Ÿè°¢Pythonçš„è¯­æ³•å’Œä¼—å¤šPythonåº“ã€‚(distributed freely with most Python language implementations).</p>
<p>A dynamically-typed and strongly-typed language, offering the rare combination of code flexibility while at the same time avoiding pesky implicit-type-conversion bugs.</p>
<p>å…è´¹ä¸”å¼€æºï¼Œè¿˜è¦æˆ‘è¯´æ›´å¤šå—ï¼Ÿ</p>
<p>With regard to the question of when using Python is the â€œright choiceâ€ for a project, the complete answer also depends on a number of issues orthogonal to the language itself, such as prior technology investment, skill set of the team, and so on. Although the question as stated above implies interest in a strictly technical answer, a developer who will raise these additional issues in an interview will always â€œscore more pointsâ€ with me since it indicates an awareness of, and sensitivity to, the â€œbigger pictureâ€ (i.e., beyond just the technology being employed). Conversely, a response that Python is always the right choice is a clear sign of an unsophisticated developer.</p>
<p>###Q: Pythonè¯­è¨€çš„æœ‰å“ªäº›ç¼ºé™·ï¼Ÿ</p>
<p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå¦‚æœä½ å¾ˆäº†è§£ä¸€é—¨è¯­è¨€ï¼Œä½ å°±åº”è¯¥çŸ¥é“å®ƒçš„ç¼ºç‚¹ï¼Œå› æ­¤å›ç­”å¦‚â€œä»–æ²¡æœ‰ä»»ä½•æˆ‘ä¸å–œæ¬¢çš„ä¸œè¥¿â€æˆ–è€…â€œå®ƒæ²¡æœ‰ç¼ºç‚¹â€éƒ½éå¸¸telling indeedã€‚</p>
<p>è¿™ä¸ªé—®é¢˜ä¸¤ä¸ªæœ€å¸¸è§çš„æœ‰æ•ˆç­”æ¡ˆ(ç»ä¸æ˜¯è¯¦ç»†åˆ—è¡¨)æ˜¯ï¼š</p>
<p><a href="https://wiki.python.org/moin/GlobalInterpreterLock" target="_blank" rel="external">å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰</a>ã€‚ CPythonï¼ˆæœ€å¸¸ç”¨çš„Pythonå®ç°ï¼‰æ˜¯éå®Œå…¨çº¿ç¨‹å®‰å…¨çš„ã€‚ä¸ºäº†æ”¯æŒå¤šçº¿ç¨‹çš„Pythonç¨‹åºï¼Œå½“å‰çº¿ç¨‹å¿…é¡»ä¿æŒCPythonæä¾›çš„ä¸€ä¸ªå…¨å±€é”ï¼Œä¹‹åæ‰èƒ½å®‰å…¨åœ°è®¿é—®pythonå¯¹è±¡ã€‚å…¶ç»“æœæ˜¯ï¼Œä¸ç®¡æœ‰å¤šå°‘çº¿ç¨‹æˆ–å¤„ç†å™¨å­˜åœ¨ï¼Œåœ¨ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¢«æ‰§è¡Œã€‚ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<a href="http://www.toptal.com/python#aboutPyPy" target="_blank" rel="external">ä¹‹å‰è®¨è®ºçš„PyPyå®ç°</a>æä¾›äº†å¯¹æµ·é‡micro-threadså¹¶å‘çš„æ”¯æŒã€‚</p>
<p>æ‰§è¡Œé€Ÿåº¦ã€‚ Pythonå¯èƒ½æ¯”ç¼–è¯‘è¯­è¨€è¦æ…¢ï¼Œå› ä¸ºå®ƒæ˜¯è¢«è§£é‡Šçš„ã€‚ ï¼ˆå—¯ï¼Œæœ‰ç‚¹æ…¢ã€‚æŸ¥çœ‹<a href="http://www.toptal.com/python#interpretedOrCompiled" target="_blank" rel="external">ä¹‹å‰æˆ‘ä»¬é’ˆå¯¹è¿™ä¸ªé—®é¢˜çš„è®¨è®º</a>ã€‚ï¼‰<br>åŒ…èµ·æ¥</p>
<p>##æ€»ç»“</p>
<p>æœ¬æ–‡ä¸­æ‰€åˆ—ä¸¾çš„é—®é¢˜å’ŒæŠ€å·§å¯ä»¥å¸®åŠ©ä½ è¯†åˆ«çœŸæ­£çš„pythoné«˜æ‰‹ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨ä½ å¯»æ‰¾é¡¶å°–pythonå¼€å‘è€…çš„æ—¶å€™ï¼Œè¿™äº›é—®é¢˜å’ŒæŠ€å·§èƒ½æˆä¸ºä¸€ä¸ªâ€œä»è°·å£³åˆ†ç¦»éº¦å­â€çš„æœ‰ç”¨å·¥å…·ã€‚ç„¶è€Œï¼Œè¦è®°ä½ï¼Œè¿™äº›ä»…ä»…åº”è¯¥æ˜¯ä½œä¸ºå·¥å…·è¢«çº³å…¥ä½ çš„æ•´ä½“æ‹›è˜å·¥å…·ç®±å’Œæˆ˜ç•¥ä¸­ã€‚</p>
<p>å¦å¤–ï¼Œå¯¹äºé‚£äº›å¯èƒ½ä¼šé”™è¯¯åœ°é˜…è¯»æœ¬æŒ‡å—ï¼Œå¸Œæœ›å­¦ä¹ å¦‚ä½•æ•æ‰çˆ¬è¡ŒåŠ¨ç‰©ï¼ˆå¯¹ä¸èµ·ï¼Œä¼™è®¡ï¼Œä¸€ç±»é”™è¯¯çš„èŸ’è›‡ï¼ï¼‰çš„äººï¼Œæˆ‘ä»¬æ¨èä½ æ¥å¼—ç½—é‡Œè¾¾å·é‡ç”ŸåŠ¨ç‰©åŸºé‡‘ä¼šçš„PythonæŒ‘æˆ˜èµ›ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/19/ç¿»è¯‘-7ä¸ªç»å…¸pythoné¢è¯•é¢˜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/19/ç¿»è¯‘-7ä¸ªç»å…¸pythoné¢è¯•é¢˜/" itemprop="url">[ç¿»è¯‘]7ä¸ªç»å…¸pythoné¢è¯•é¢˜</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-19T17:30:02+08:00">
                2015-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åŸæ–‡åœ¨<a href="http://www.toptal.com/python/interview-questions" target="_blank" rel="external">è¿™é‡Œtoptal</a></p>
<p>##ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</p>
<pre><code>list = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]
print list[10:]
</code></pre><p>ä¸Šé¢çš„ä»£ç è¾“å‡º<code>[]</code>ï¼Œå¹¶ä¸”ä¸ä¼šå¯¼è‡´<code>IndexError</code>é”™è¯¯</p>
<p>è·Ÿä½ æƒ³çš„ä¸€æ ·ï¼Œå½“å–åˆ—è¡¨å…ƒç´ çš„æ—¶å€™ï¼Œå¦‚æœç´¢å¼•å€¼è¶…è¿‡äº†å…ƒç´ çš„ä¸ªæ•°(ä¾‹å¦‚åœ¨ä¸Šé¢çš„åˆ—è¡¨ä¸­ï¼Œå–list[10])å°†ä¼šå¯¼è‡´<code>IndexError</code>é”™è¯¯ã€‚ä½†æ˜¯ï¼Œå–ä¸€ä¸ªåˆ—è¡¨çš„åˆ‡ç‰‡çš„æ—¶å€™ï¼Œå¦‚æœèµ·å§‹ç´¢å¼•è¶…è¿‡äº†å…ƒç´ ä¸ªæ•°ï¼Œå°†ä¸ä¼šå¼•èµ·<code>IndexError</code>é”™è¯¯ï¼Œä»…è¿”å›ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚</p>
<p>è¿™ä¸€ç‰¹æ€§å°†ä¼šå¯¼è‡´ä¸€äº›éå¸¸éš¾äºè¿½è¸ªçš„bugï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶æ ¹æœ¬æ²¡æœ‰é”™è¯¯äº§ç”Ÿã€‚</p>
<p>##ä¸‹é¢çš„ä»£ç åœ¨Python2ä¸­çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿè§£é‡Šä½ çš„ç­”æ¡ˆ</p>
<pre><code>def div1(x,y):
    print &quot;%s/%s = %s&quot; % (x, y, x/y)

def div2(x,y):
    print &quot;%s//%s = %s&quot; % (x, y, x//y)

div1(5,2)
div1(5.,2)
div2(5,2)
div2(5.,2.)
</code></pre><p>å¦å¤–ï¼Œåœ¨Python3ä¸­ä¸Šé¢çš„ä»£ç çš„è¾“å‡ºæœ‰ä½•ä¸åŒ(å‡è®¾ä»£ç ä¸­çš„printè¯­å¥éƒ½è½¬åŒ–æˆäº†Python3ä¸­çš„è¯­æ³•ç»“æ„)ï¼Ÿ</p>
<p>åœ¨<strong>Python2</strong>ä¸­ï¼Œä»£ç çš„è¾“å‡ºæ˜¯ï¼š</p>
<pre><code>5/2 = 2
5.0/2 = 2.5
5//2 = 2
5.0//2.0 = 2.0
</code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•´æ•°ï¼ŒPython2é»˜è®¤æ‰§è¡Œæ•´æ•°è¿ç®—ã€‚æ‰€ä»¥ï¼Œ<code>5/2</code> ç»“æœæ˜¯<code>2</code>ï¼Œè€Œ<code>5./2</code>ç»“æœæ˜¯<code>2.5</code></p>
<p>æ³¨æ„ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„importè¯­å¥æ¥è¦†ç›–Python2ä¸­çš„è¿™ä¸€è¡Œä¸º</p>
<pre><code>from __future__ import division 
</code></pre><p>è¿˜è¦æ³¨æ„â€œåŒæ–œæ â€(<code>//</code>)æ“ä½œç¬¦å°†ä¼šä¸€ç›´æ‰§è¡Œæ•´é™¤ï¼Œå¿½ç•¥æ“ä½œæ•°çš„ç±»å‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ5.0//2.0å³ä½¿åœ¨Python2ä¸­ç»“æœä¹Ÿæ˜¯2.0</p>
<p>ä½†æ˜¯åœ¨Python3å¹¶æ²¡æœ‰è¿™ä¸€è¡Œä¸ºã€‚ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯æ•´æ•°æ—¶ï¼Œä¹Ÿä¸æ‰§è¡Œæ•´æ•°è¿ç®—ã€‚åœ¨Python3ä¸­ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>5/2 = 2.5
5.0/2 = 2.5
5//2 = 2
5.0//2.0 = 2.0
</code></pre><p>##ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿè¯·è§£é‡Šä½ çš„ç­”æ¡ˆ</p>
<pre><code>def extendList(val, list=[]):
    list.append(val)
    return list

list1 = extendList(10)
list2 = extendList(123,[])
list3 = extendList(&apos;a&apos;)

print &quot;list1 = %s&quot; % list1
print &quot;list2 = %s&quot; % list2
print &quot;list3 = %s&quot; % list3
</code></pre><p>å¦‚ä½•ä¿®æ”¹å‡½æ•°<code>ExtendList</code>çš„å®šä¹‰æ‰èƒ½äº§ç”Ÿæˆ‘ä»¬å¸Œæœ›çš„è¡Œä¸ºï¼Ÿ</p>
<p>è¾“å‡ºä¸ºï¼š</p>
<pre><code>list1 = [10, &apos;a&apos;]
list2 = [123]
list3 = [10, &apos;a&apos;]
</code></pre><p>å¾ˆå¤šäººä¼šé”™è¯¯åœ°é¢„è®¡<code>list1</code>ç­‰äº<code>ï¼»10ï¼½</code>ï¼Œ<code>list3</code>ç­‰äº<code>[&#39;a&#39;]</code>ï¼Œè®¤ä¸º<code>extendList</code>å‡½æ•°çš„<code>list</code>å‚æ•°åœ¨æ¯ä¸€æ¬¡å‡½æ•°è¢«è°ƒç”¨æ—¶éƒ½ä¼šè¢«è®¾ç½®ä¸ºé»˜è®¤å€¼<code>[]</code></p>
<p>ä½†æ˜¯ï¼ŒçœŸå®çš„æƒ…å†µæ˜¯ï¼Œé»˜è®¤çš„<code>list</code>åªåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™è¢«åˆ›å»ºä¸€æ¬¡ã€‚ä¹‹åä¸æŒ‡å®š<code>list</code>å‚æ•°åœ°è°ƒç”¨<code>extendList</code>å‡½æ•°æ—¶ï¼Œä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ª<code>list</code>ã€‚è¿™æ˜¯å› ä¸ºå¸¦é»˜è®¤å‚æ•°çš„è¡¨è¾¾å¼æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™è¢«è®¡ç®—çš„ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶ã€‚</p>
<p>æ‰€ä»¥ï¼Œ<code>list1</code>å’Œ<code>list3</code>éƒ½æ˜¯åœ¨æ“ä½œåŒä¸€ä¸ªé»˜è®¤<code>list</code>ï¼Œè€Œ<code>list2</code>æ˜¯åœ¨æ“ä½œå®ƒè‡ªå·±åˆ›å»ºçš„ä¸€ä¸ªç‹¬ç«‹çš„<code>list</code>(å°†è‡ªå·±çš„ç©º<code>list</code>ä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»)</p>
<p><code>extendlist</code>çš„å®šä¹‰å¯ä»¥è¿™æ ·å®šä¹‰æ¥è¾¾åˆ°æˆ‘ä»¬é¢„æœŸçš„æ•ˆæœï¼š</p>
<pre><code>def extendList(val, list=None):
    if list is None:
        list = []
    list.append(val)
    return list
</code></pre><p>è°ƒç”¨ä¿®æ”¹åçš„å‡½æ•°ï¼Œè¾“å‡ºæ˜¯ï¼š</p>
<pre><code>list1 = [10]
list2 = [123]
list3 = [&apos;a&apos;]
</code></pre><p>##ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿè¯·è§£é‡Šä½ çš„ç­”æ¡ˆ</p>
<pre><code>class Parent(object):
    x = 1

class Child1(Parent):
    pass

class Child2(Parent):
    pass

print Parent.x, Child1.x, Child2.x
Child1.x = 2
print Parent.x, Child1.x, Child2.x
Parent.x = 3
print Parent.x, Child1.x, Child2.x
</code></pre><p>è¾“å‡ºä¸ºï¼š</p>
<pre><code>1 1 1
1 2 1
3 2 3
</code></pre><p>è®©å¾ˆå¤šäººæ„Ÿåˆ°ç–‘æƒ‘å’ŒæƒŠè®¶çš„æ˜¯ï¼Œæœ€åä¸€è¡Œçš„è¾“å‡ºç«Ÿç„¶ä¸æ˜¯<code>3 2 1</code>è€Œæ˜¯<code>3 2 3</code>. ä¸ºä»€ä¹ˆä¿®æ”¹äº†Parent.Xçš„å€¼ä¼šå½±å“åˆ°<code>Child2.x</code>ï¼Œä½†æ˜¯åŒæ—¶åˆæ²¡æœ‰æ”¹å˜<code>Child1.x</code>çš„å€¼å‘¢ï¼Ÿ        </p>
<p>è¿™ä¸ªé—®é¢˜çš„å…³é”®åœ¨äºï¼Œåœ¨pythonä¸­ï¼Œç±»ä¸­çš„å˜é‡åœ¨å†…éƒ¨è¢«å½“ä½œå­—å…¸å¤„ç†ã€‚å¦‚æœä¸€ä¸ªå˜é‡ååœ¨å½“å‰ç±»çš„å­—å…¸ä¸­æ²¡æœ‰è¢«å‘ç°ï¼Œç³»ç»Ÿå°†ä¼šåœ¨è¿™ä¸ªç±»çš„ç¥–å…ˆ(ä¾‹å¦‚ï¼Œå®ƒçš„çˆ¶ç±»)ä¸­ç»§ç»­å¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢(å¦‚æœä¸€ä¸ªå˜é‡ååœ¨è¿™ä¸ªç±»å’Œè¿™ä¸ªç±»çš„ç¥–å…ˆä¸­éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆå°†ä¼šå¼•å‘ä¸€ä¸ª<code>AttributeError</code>é”™è¯¯)</p>
<p>å› æ­¤ï¼Œåœ¨çˆ¶ç±»ä¸­å°†å˜é‡xèµ‹å€¼ä¸º1ï¼Œé‚£ä¹ˆxå˜é‡å°†å¯ä»¥è¢«å½“å‰ç±»å’Œæ‰€æœ‰è¿™ä¸ªç±»çš„å­ç±»å¼•ç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªprintè¯­å¥è¾“å‡ºä¸º<code>1 1 1</code>.</p>
<p>æ¥ä¸‹æ¥ï¼Œå¦‚æœå®ƒçš„å­ç±»è¦†ç›–äº†è¿™ä¸ªå€¼(ä¾‹å¦‚ï¼Œ å½“æˆ‘ä»¬æ‰§è¡Œ<code>Child1.x = 2</code>)ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡çš„å€¼ä»…ä»…åœ¨è¿™ä¸ªå­ç±»ä¸­å‘ç”Ÿäº†æ”¹å˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¬¬äºŒä¸ªprintè¯­å¥è¾“å‡º<code>1 2 1</code></p>
<p>æœ€åï¼Œå¦‚æœçˆ¶ç±»æ”¹å˜äº†è¿™ä¸ªå˜é‡çš„å€¼(ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ‰§è¡Œ<code>Parent.x = 3</code>)ï¼Œæ‰€æœ‰æ²¡æœ‰è¦†ç›–è¿™ä¸ªå‚æ•°å€¼çš„å­ç±»(åœ¨è¿™ä¸ªä¾‹å­ä¸­è¦†ç›–äº†å‚æ•°çš„å°±æ˜¯<code>Child2</code>)éƒ½ä¼šå—åˆ°å½±å“ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¬¬ä¸‰ä¸ªprintè¯­å¥çš„è¾“å‡ºä¸º<code>3 2 3</code></p>
<p>##ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿè¯·è§£é‡Šä½ çš„ç­”æ¡ˆ</p>
<pre><code>def multipliers():
    return [lambda x : i * x for i in range(4)]

print [m(2) for m in multipliers()]
</code></pre><p>æ€ä¹ˆä¿®æ”¹multipliersçš„å®šä¹‰æ‰èƒ½è¾¾åˆ°æœŸæœ›çš„æ•ˆæœï¼Ÿ</p>
<p>ä¸Šé¢ä»£ç çš„è¾“å‡ºæ˜¯<code>[6, 6, 6, 6]</code>(ä¸æ˜¯<code>[0, 2, 4, 6]</code>).</p>
<p>åŸå› æ˜¯Pythonçš„é—­åŒ…æ˜¯å»¶è¿Ÿç»‘å®š(<code>late binding</code>)çš„ã€‚è¿™è¡¨æ˜åœ¨é—­åŒ…ä¸­ä½¿ç”¨çš„å˜é‡ç›´åˆ°å†…å±‚å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«æŸ¥æ‰¾ã€‚ç»“æœæ˜¯ï¼Œå½“è°ƒç”¨<code>multipliers()</code>è¿”å›çš„å‡½æ•°æ—¶ï¼Œ<code>i</code>å‚æ•°çš„å€¼ä¼šåœ¨è¿™æ—¶è¢«åœ¨è°ƒç”¨ç¯å¢ƒä¸­æŸ¥æ‰¾ã€‚æ‰€ä»¥ï¼Œæ— è®ºè°ƒç”¨è¿”å›çš„å“ªä¸ªå‡½æ•°ï¼Œ<code>for</code>å¾ªç¯æ­¤æ—¶å·²ç»ç»“æŸï¼Œ<code>i</code>ç­‰äºå®ƒæœ€ç»ˆçš„å€¼<code>3</code>ã€‚å› æ­¤ï¼Œæ‰€æœ‰è¿”å›çš„å‡½æ•°éƒ½è¦ä¹˜ä»¥ä¼ é€’è¿‡æ¥çš„<code>3</code>ï¼Œå› ä¸ºä¸Šé¢çš„ä»£ç ä¼ é€’äº†<code>2</code>ä½œä¸ºå‚æ•°ï¼Œæ‰€ä»¥ä»–ä»¬éƒ½è¿”å›äº†<code>6</code>ï¼ˆå³ï¼Œ<code>3 * 2</code>ï¼‰</p>
<p>(é¡ºä¾¿æä¸€å¥ï¼Œæ­£å¦‚åœ¨ä¹¦<a href="http://docs.python-guide.org/en/latest/" target="_blank" rel="external">ã€ŠThe Hitchhikerâ€™s Guide to Pythonã€‹</a>ä¸­æå‡ºæ¥çš„ä¸€æ ·, æœ‰ä¸€ç§å¹¿æ³›ä¼ æ’­çš„è¯¯è§£è®¤ä¸ºè¿™ä¸ªé—®é¢˜å’Œlambdaè¡¨è¾¾å¼æœ‰å…³ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚é€šè¿‡labdaè¡¨è¾¾å¼äº§ç”Ÿçš„å‡½æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œä½¿ç”¨æ™®é€šçš„<code>def</code>å®šä¹‰çš„å‡½æ•°çš„è¡Œä¸ºå’Œlambdaè¡¨è¾¾å¼äº§ç”Ÿçš„å‡½æ•°çš„è¡Œä¸ºæ˜¯ä¸€æ ·çš„.)</p>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¯ä»¥ç»•è¿‡è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ã€‚</p>
<p>æ–¹æ³•ä¸€æ˜¯åƒä¸‹é¢ä¸€æ ·ä½¿ç”¨Pythonçš„ç”Ÿæˆå™¨(generator)</p>
<pre><code>def multipliers():
     for i in range(4): yield lambda x : i * x 
</code></pre><p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ›é€ ä¸€ä¸ªé—­åŒ…ï¼Œé€šè¿‡ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å‚æ•°æ¥ç«‹å³ç»‘å®šå®ƒçš„å‚æ•°</p>
<pre><code>def multipliers():
    return [lambda x, i=i : i * x for i in range(4)]
</code></pre><p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨functools.partialå‡½æ•°ï¼š</p>
<pre><code>from functools import partial
from operator import mul

def multipliers():
    return [partial(mul, i) for i in range(4)]
</code></pre><p>##è€ƒè™‘ä¸‹é¢çš„ä»£ç ç‰‡æ®µ:</p>
<pre><code>1. list = [ [ ] ] * 5
2. list  # output?
3. list[0].append(10)
4. list  # output?
5. list[1].append(20)
6. list  # output?
7. list.append(30)
8. list  # output?
</code></pre><p>ç¬¬2ï¼Œ4ï¼Œ6ï¼Œ8è¡Œçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿè§£é‡Šä½ çš„ç­”æ¡ˆ.</p>
<p>è¾“å‡ºå¦‚ä¸‹:</p>
<pre><code>[[], [], [], [], []]
[[10], [10], [10], [10], [10]]
[[10, 20], [10, 20], [10, 20], [10, 20], [10, 20]]
[[10, 20], [10, 20], [10, 20], [10, 20], [10, 20], 30]
</code></pre><p>ä¸‹é¢æ˜¯è§£é‡Š:</p>
<p>ç¬¬ä¸€è¡Œçš„è¾“å‡ºå‡­ç›´è§‰å°±èƒ½çŸ¥é“ï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚å³ï¼š<code>list = [ [ ] ] * 5</code>åˆ›å»ºäº†ä¸€ä¸ªå…ƒç´ æ˜¯5ä¸ªåˆ—è¡¨çš„åˆ—è¡¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™é‡Œè¦ç†è§£çš„å…³é”®æ˜¯ï¼Œ<code>list = [ [ ] ] * 5</code>å¹¶æ²¡æœ‰åˆ›å»ºä¸€ä¸ªåŒ…å«5ä¸ªä¸åŒåˆ—è¡¨çš„åˆ—è¡¨ã€‚åˆ›å»ºçš„è¿™ä¸ªåˆ—è¡¨é‡Œçš„5ä¸ªåˆ—è¡¨ï¼Œæ˜¯å¯¹åŒä¸€ä¸ªåˆ—è¡¨çš„å¼•ç”¨ï¼ˆa a list of 5 references to the same listï¼‰ã€‚ç†è§£äº†è¿™äº›ï¼Œä½ å°±èƒ½æ›´å¥½åœ°ç†è§£ä½™ä¸‹çš„è¾“å‡ºã€‚</p>
<p><code>list[0].append(10)</code>å°†æ•°å­—10æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯ç”±äº5ä¸ªåˆ—è¡¨æ˜¯å¯¹åŒä¸€ä¸ªåˆ—è¡¨çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯<code>[[10], [10], [10], [10], [10]]</code>ã€‚</p>
<p>åŒæ ·çš„ï¼Œ<code>list[1].append(20)</code>å°†20è¿½åŠ åˆ°ç¬¬äºŒä¸ªåˆ—è¡¨ã€‚ä½†æ˜¯åŒæ ·ï¼Œç”±äºè¿™5ä¸ªåˆ—è¡¨å¼•ç”¨åŒä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥è¾“å‡ºï¼š<code>[[10, 20], [10, 20], [10, 20], [10, 20], [10, 20]]</code>.</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ <code>list.append(30)</code>æ˜¯å°†ä¸€ä¸ªå…¨æ–°çš„å…ƒç´ è¿½åŠ åˆ°â€œå¤–å±‚â€çš„åˆ—è¡¨ï¼Œæ‰€ä»¥äº§ç”Ÿäº†è¿™æ ·çš„è¾“å‡ºï¼š<code>[[10, 20], [10, 20], [10, 20], [10, 20], [10, 20], 30]</code>.</p>
<p>##æœ‰ä¸€ä¸ªæ‹¥æœ‰Nä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼Œç”¨ä¸€ä¸ªåˆ—è¡¨è§£æå¼ç”Ÿæˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œå…ƒç´ çš„å€¼åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:</p>
<pre><code>(a) å¶æ•°ï¼Œä»¥åŠ
(b) åœ¨åŸåˆ—è¡¨ä¸­ï¼Œç´¢å¼•ä¸ºå¶æ•°
</code></pre><p>ä¾‹å¦‚ï¼Œå¦‚æœlist[2]çš„å€¼æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ åº”è¯¥ä¹Ÿè¢«åŒ…å«åœ¨æ–°åˆ—è¡¨ä¸­ï¼Œå› ä¸ºå®ƒåœ¨åŸåˆ—è¡¨ä¸­çš„ç´¢å¼•ä¹Ÿæ˜¯å¶æ•°(å³ 2). ä½†æ˜¯ï¼Œ å¦‚æœlist[3]æ˜¯å¶æ•°ï¼Œé‚£è¿™ä¸ªå€¼ä¸åº”è¯¥è¢«åŒ…å«åœ¨æ–°åˆ—è¡¨ä¸­ï¼Œå› ä¸ºå®ƒåœ¨åŸåˆ—è¡¨ä¸­çš„ç´¢å¼•æ˜¯ä¸€ä¸ªå¥‡æ•°ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„è§£æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>[x for x in list[::2] if x%2 == 0]
</code></pre><p>ä¾‹å¦‚ï¼Œç»™å‡ºä¸‹é¢çš„åˆ—è¡¨:</p>
<pre><code>#        0   1   2   3    4    5    6    7    8
list = [ 1 , 3 , 5 , 8 , 10 , 13 , 18 , 36 , 78 ]
</code></pre><p>åˆ—è¡¨è§£æå¼<code>[x for x in list[::2] if x%2 == 0]</code> ä¼šç”Ÿæˆ:</p>
<pre><code>[10, 18, 78]
</code></pre><p>è¿™ä¸ªè¡¨è¾¾å¼é¦–å…ˆå–åˆ—è¡¨ä¸­ç´¢å¼•æ˜¯å¶æ•°çš„æ•°å­—ï¼Œç„¶åè¿‡æ»¤æ‰æ‰€æœ‰çš„å¥‡æ•°.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/19/éƒ¨ç½²multi-region-openstackç¯å¢ƒ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/19/éƒ¨ç½²multi-region-openstackç¯å¢ƒ/" itemprop="url">éƒ¨ç½²multi-region openstackç¯å¢ƒ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-19T17:17:06+08:00">
                2015-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/openstack/" itemprop="url" rel="index">
                    <span itemprop="name">openstack</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>Icehouse</code>é»˜è®¤çš„<code>region</code>æ˜¯<code>RegionOne</code>ã€‚å› ä¸ºé»˜è®¤<code>region</code>çš„å­˜åœ¨ï¼Œæ— è®ºæ˜¯åœ¨å‘½ä»¤è¡Œï¼Œè¿˜æ˜¯åœ¨webä¸Šï¼Œæˆ‘ä»¬éƒ½ä¸éœ€è¦æŒ‡å®š<code>region</code>ã€‚åœ¨å‘½ä»¤è¡Œä¸­ä½ è¿˜å¯ä»¥ç”¨<code>os-region-name</code>æ¥æŒ‡å®šregionï¼Œåœ¨webä¸­ä½ å°±æ ¹æœ¬æ‰¾ä¸åˆ°ä¸regionç›¸å…³çš„ä¸œè¥¿ã€‚</p>
<p>å› ä¸ºè¿™æ ·ï¼Œå¾ˆå¤šäººéƒ½ä¸äº†è§£regionçš„æ¦‚å¿µï¼Œå¦‚æœä½ å·²ç»ä½¿ç”¨è¿‡openstackï¼Œå¹¶ä¸”ä¸çŸ¥é“åœ¨å“ªçœ‹åˆ°äº†å¯ä»¥è®¾ç½®å¤šregionè¿™æ ·ä¸€ä»¶äº‹ï¼Œæ‰€ä»¥æƒ³è‡ªå·±éƒ¨ç½²ä¸€ä¸ªçœ‹çœ‹ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠè¿™ç¯‡æ–‡ç« è¯»å®Œã€‚</p>
<p>å› ä¸ºåªæ˜¯ä¸€ä¸ªå®éªŒï¼Œæˆ‘ä»¬æ€ä¹ˆç®€å•æ€ä¹ˆæ¥ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šå¿«é€Ÿéƒ¨ç½²openstackç¯å¢ƒçš„æ•™ç¨‹ï¼Œé¦–å…ˆä½ éœ€è¦æŒ‰ç…§æ•™ç¨‹éƒ¨ç½²ä¸¤å¥—å®Œæ•´çš„openstackç¯å¢ƒã€‚æœ‰äº†è¿™ä¸¤å¥—ç¯å¢ƒï¼Œæˆ‘ä»¬ç¨å¾®æ”¹ä¸€ä¸‹é…ç½®å³å¯ã€‚</p>
<p>##å¢åŠ endpoint</p>
<p>é€‰æ‹©ä¸€å°æœºå™¨ä½œä¸ºRegionOneï¼Œå¦ä¸€å°åˆ™ä¸ºRegionTwoã€‚æˆ‘ä»¬éœ€è¦åœ¨RegionOneä¸Šå¢åŠ Regiontwoä¸Šçš„serviceçš„endpointã€‚</p>
<p><img src="http://7xj6cl.com1.z0.glb.clouddn.com/Multi-Site_shared_keystone_horizon_swift1.png" alt=""></p>
<p>å¦‚å›¾ï¼Œå¯ä»¥çœ‹åˆ°Horizonï¼ŒKeystoneå’ŒSwiftæ˜¯å…¬ç”¨çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å¢åŠ è¿™äº›æœåŠ¡ä¹‹å¤–çš„æœåŠ¡çš„endpoint</p>
<p><img src="http://7xj6cl.com1.z0.glb.clouddn.com/service-list.png" alt=""></p>
<p>å¦‚å›¾æˆ‘ä»¬éœ€è¦å¢åŠ cinder,ec2,glance,neutron,novaçš„endpointã€‚æ·»åŠ endpointçš„å‘½ä»¤æ˜¯ï¼š</p>
<pre><code>keystone endpoint-create --region RegionTwo 
                         --service &lt;service&gt; 
                          --publicurl &lt;public-url&gt;
                         --adminurl &lt;admin-url&gt;
                         --internalurl &lt;internal-url&gt;
</code></pre><p>è¿™æ ·æ·»åŠ å¥½äº†ä¹‹åï¼Œå·¥ä½œå°±å®Œæˆä¸€åŠäº†ã€‚</p>
<p>å¦‚æœå°±è¿™æ ·æ‰“å¼€RegionOneçš„webï¼Œä¼šå‘ç°åœ¨é¡µé¢ä¸Šå‡ºç°äº†ä¸€ä¸ªä¹‹å‰æ²¡æœ‰çš„é€‰æ‹©æ¡†ï¼Œå¯ä»¥é€‰æ‹©RegionOneæˆ–è€…RegionTwoï¼Œä½†æ˜¯é€‰äº†Regiontwoä¹‹åï¼ŒæŒ‰æ¦‚å†µæˆ–è€…äº‘ä¸»æœºä¹‹ç±»çš„æŒ‰é’®ï¼Œä¼šå‡ºç°å„ç§<strong>æ— æƒé™</strong>çš„é”™è¯¯ï¼Œå¥½è›‹ç–¼ã€‚å…¶å®è¿™æ—¶å€™æˆ‘ä»¬çš„webè¿˜æ²¡æœ‰é…ç½®å¥½ã€‚</p>
<p>##é…ç½®horizon</p>
<p>æ‰“å¼€æ–‡ä»¶</p>
<pre><code>vim /etc/openstack-dashboard/local_settings.py
</code></pre><p>æ‰¾åˆ°</p>
<pre><code># For multiple regions uncomment this configuration, and add (endpoint, title).
# AVAILABLE_REGIONS = [
#     (&apos;http://cluster1.example.com:5000/v2.0&apos;, &apos;cluster1&apos;),
#     (&apos;http://cluster2.example.com:5000/v2.0&apos;, &apos;cluster2&apos;),
# ]
</code></pre><p>å»æ‰æ³¨é‡Šï¼Œæ”¹æˆè¿™æ ·ï¼š</p>
<pre><code># For multiple regions uncomment this configuration, and add (endpoint, title).
AVAILABLE_REGIONS = [ 
     (&apos;http://10.10.7.208:5000/v2.0&apos;, &apos;RegionOne&apos;),
     (&apos;http://10.10.7.200:5000/v2.0&apos;, &apos;RegionTwo&apos;),
]
</code></pre><p>æˆ‘çš„ä¸¤å°ç¯å¢ƒæ˜¯<code>10.10.7.208</code>å’Œ<code>10.10.7.200</code>ï¼Œä½ éœ€è¦æ”¹æˆä½ çš„ç¯å¢ƒçš„ipã€‚åé¢çš„5000ç«¯å£ä¸éœ€è¦æ”¹ï¼Œ5000æ˜¯keystoneç›‘å¬çš„ç«¯å£ï¼Œå‰©ä¸‹çš„éƒ½ä¸éœ€è¦æ”¹ã€‚</p>
<p>æ”¹å®Œä¹‹åï¼Œä¿å­˜ï¼Œé‡å¯web</p>
<pre><code>service apache2 restart
#è¿™é‡Œä¹Ÿæ˜¯ï¼Œå¦‚æœä½ ä¸æ˜¯ç”¨çš„apacheï¼Œè¯·æ”¹æˆä½ é‡å¯webçš„æ–¹å¼
</code></pre><p>è¿™æ—¶å€™å†ç™»å½•å°±ä¸€åˆ‡OKå•¦ï¼</p>
<p><img src="http://7xj6cl.com1.z0.glb.clouddn.com/region.png" alt=""></p>
<p>å³ä¸Šè§’çš„regionæ§åˆ¶ä½ ç™»å½•çš„æ˜¯å“ªä¸ªregionï¼Œä¸­é—´çš„é‚£ä¸ªæ˜¯ç”¨æˆ·è‡ªç”±åˆ‡æ¢çš„ç”¨çš„ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/19/è®©macçš„ç»ˆç«¯å®ç°å…‹éš†ä¼šè¯åŠŸèƒ½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/19/è®©macçš„ç»ˆç«¯å®ç°å…‹éš†ä¼šè¯åŠŸèƒ½/" itemprop="url">è®©macçš„ç»ˆç«¯å®ç°å…‹éš†ä¼šè¯åŠŸèƒ½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-19T10:34:12+08:00">
                2015-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mac/" itemprop="url" rel="index">
                    <span itemprop="name">mac</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>winä¸Šçš„securecrtå’Œxshelléƒ½æ”¯æŒå…‹éš†å›è¯ï¼Œè¿™æ ·sshåˆ°åˆ«çš„ä¸»æœºå°±ä¸éœ€è¦æ¯æ¬¡éƒ½è¾“å…¥å¯†ç ã€‚macç‰ˆçš„securecrtéå¸¸éš¾ç”¨ï¼Œç½‘ä¸Šæ‰¾åˆ°æ–¹æ³•å¯ä»¥è®©macè‡ªå¸¦çš„ç»ˆç«¯å®ç°å…‹éš†ä¼šè¯çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ã€‚</p>
<pre><code>cd ~/.ssh
touch config
</code></pre><p>åœ¨configæ–‡ä»¶ä¸­å†™å…¥ä¸‹é¢çš„å†…å®¹ï¼š</p>
<pre><code>Host *
    ControlMaster auto
    ControlPath ~/.ssh/%h-%p-%r
    ControlPersist yes
</code></pre><p>ç¬¬ä¸€æ¬¡ç™»é™†è¾“å…¥å¯†ç åï¼Œç¬¬äºŒæ¬¡ç™»é™†å°±ä¸éœ€è¦å¯†ç äº†ã€‚æ¯æ¬¡ç™»é™†ï¼Œä¼šåœ¨~/.sshä¸­å»ºç«‹ä¸€ä¸ªsoketæ–‡ä»¶ï¼Œä¸‹æ¬¡ç”¨ç›¸åŒç”¨æˆ·åï¼Œç«¯å£ï¼Œä¸»æœºåè¿›è¡Œè¿æ¥å°±ä¼šè‡ªåŠ¨å¤ç”¨</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/15/openstack-horizonç®¡ç†é¡µé¢å±è”½/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/15/openstack-horizonç®¡ç†é¡µé¢å±è”½/" itemprop="url">openstack-horizonç®¡ç†é¡µé¢å±è”½</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-15T14:50:52+08:00">
                2015-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/openstack/" itemprop="url" rel="index">
                    <span itemprop="name">openstack</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>openstackçš„ç”¨æˆ·æœ‰roleçš„å±æ€§ï¼Œhorizonæ ¹æ®ç”¨æˆ·çš„roleä¸åŒå±•ç¤ºä¸åŒçš„é¡µé¢ï¼Œå¦‚æœroleä¸ºadminï¼Œé™¤äº†é¡¹ç›®é¡µé¢å¤–ï¼Œè¿˜ä¼šå±•ç¤ºç®¡ç†å‘˜é¡µé¢ã€‚</p>
<p><img src="/img/ç®¡ç†å‘˜.png" alt=""></p>
<p>è¿™æ˜¯å¾ˆæ­£å¸¸çš„é€»è¾‘ï¼Œä¸€ä¸ªé¡¹ç›®ä¸€ä¸ªç®¡ç†å‘˜ï¼Œå…¶ä»–äººçš„roleéƒ½æ˜¯memberã€‚ä½†æ˜¯å®é™…å¼€å‘ä¸­å¯èƒ½é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼šhorizonæä¾›çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œå¯èƒ½ä¸èƒ½æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œäºæ˜¯ä½ ä½¿ç”¨äº†<a href="http://www.opencontrail.org/" target="_blank" rel="external">opencontrail</a>æ¥è¡¥å……ï¼Œä½†æ˜¯ï¼Œç™»å½•opencontrailçš„æ—¶å€™è¦æ±‚ç”¨æˆ·å…·æœ‰adminæƒé™ï¼Œæˆ‘ä»¬å¿…é¡»è¦ç»™æ‰€æœ‰äººéƒ½åŠ ä¸Šadminæƒé™ï¼Œè€Œopencontrailåˆç¼ºä¹ç®¡ç†é¡¹ç›®å’Œç”¨æˆ·çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯éœ€è¦ä½¿ç”¨openstackï¼Œè¿™æ ·è¯¸å¤šæ‹¥æœ‰adminæƒé™çš„äººéƒ½èƒ½çœ‹åˆ°ç®¡ç†å‘˜ç•Œé¢ï¼Œå¦‚æœå¯¹ç³»ç»Ÿä¸äº†è§£ï¼Œè¯¯åˆ äº†ä¸€äº›é¡¹ç›®æˆ–è€…ç”¨æˆ·ï¼Œä¼šè®©ä½ æ’æŸ¥åˆ°æŠ“ç‹‚ã€‚</p>
<p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘çš„æƒ³æ³•æ˜¯ï¼Œåªæœ‰ç”¨æˆ·åå’Œroleå‡ä¸ºadminçš„ç”¨æˆ·æ‰èƒ½çœ‹åˆ°ç®¡ç†é¡µé¢ï¼Œroleæ»¡è¶³ä½†æ˜¯ç”¨æˆ·åä¸æ»¡è¶³çš„ç”¨æˆ·åªèƒ½çœ‹åˆ°projectã€‚æ®æ­¤å¾—åˆ°çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼Œä¸‹é¢åˆ†åˆ«å™è¿°ã€‚</p>
<p>##æ–¹æ³•ä¸€ï¼šopenstack_authçš„permission</p>
<p>horizonå·¦ä¾§æ˜¾ç¤ºçš„å¯¼èˆªæ æ˜¯ä¸€ä¸ªä¸ªdashboardï¼Œè¿™äº›dashboardé‡Œé¢çš„å­é¡¹ç›®ç§°ä¸ºpanelï¼Œä»£ç ä¸­åˆ¤æ–­æ˜¾ç¤ºæˆ–è€…ä¸æ˜¾ç¤ºä¸€ä¸ªdashboardå–å†³äºç”¨æˆ·çš„permissionï¼Œé‚£permissionåœ¨å“ªé‡Œå®šä¹‰å‘¢ï¼Ÿåœ¨openstack_authè¿™ä¸ªæ¨¡å—ä¸­ã€‚</p>
<pre><code>/usr/lib/python2.7/dist-packages/openstack_auth/backend.py
</code></pre><p>backend.pyæ–‡ä»¶ä¸­çš„ç±»<code>KeystoneBackend</code>ä¸­çš„å‡½æ•°<code>get_all_permissions</code>ä¸­å®šä¹‰äº†ç”¨æˆ·çš„æƒé™ï¼š</p>
<pre><code>def get_all_permissions(self, user, obj=None):
    &quot;&quot;&quot;Returns a set of permission strings that this user has through
       his/her Keystone &quot;roles&quot;.

       The permissions are returned as ``&quot;openstack.{{ role.name }}&quot;``.
    &quot;&quot;&quot;
    if user.is_anonymous() or obj is not None:
        return set()
    # TODO(gabrielhurley): Integrate policy-driven RBAC
    #                      when supported by Keystone.
    #print user.username
    role_perms = set([&quot;openstack.roles.%s&quot; % role[&apos;name&apos;].lower()
                      for role in user.roles])
    service_perms = set([&quot;openstack.services.%s&quot; % service[&apos;type&apos;].lower()
                      for service in user.service_catalog])
    return role_perms | service_perms
</code></pre><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰çš„æƒé™æ˜¯<code>role_perms</code>å’Œ<code>service_perms</code>ï¼Œä¸å¦¨å°†å®ƒä»¬æ‰“å°å‡ºæ¥çœ‹ä¸€ä¸‹ï¼Œå€’æ•°ç¬¬äºŒè¡ŒåŠ ä¸ªæ‰“å°ï¼š</p>
<pre><code>print role_perms | service_perms
</code></pre><p>å†…å®¹ä¸ºï¼š</p>
<pre><code>set([u&apos;openstack.services.compute&apos;,  u&apos;openstack.services.orchestration&apos;, u&apos;openstack.services.identity&apos;, u&apos;openstack.roles
.keystoneserviceadmin&apos;, u&apos;openstack.services.network&apos;, u&apos;openstack.roles.keystoneadmin&apos;, u&apos;openstack.services.volume&apos;, u&apos;openstack.services.ec2&apos;, u&apos;openstack.roles.admin&apos;, u&apos;openstack.services.image&apos;])
</code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡ç”¨æˆ·åæ¥é™åˆ¶dashboardå’Œpanelçš„æ˜¾ç¤ºï¼Œé‚£å°±è¦å¢åŠ name_permè¿™ä¸ªå­—æ®µï¼Œä¿®æ”¹åçš„å‡½æ•°å¦‚ä¸‹ï¼š</p>
<pre><code>def get_all_permissions(self, user, obj=None):
    &quot;&quot;&quot;Returns a set of permission strings that this user has through
       his/her Keystone &quot;roles&quot;.

       The permissions are returned as ``&quot;openstack.{{ role.name }}&quot;``.
    &quot;&quot;&quot;
    if user.is_anonymous() or obj is not None:
        return set()
    # TODO(gabrielhurley): Integrate policy-driven RBAC
    #                      when supported by Keystone.
    #print user.username
    role_perms = set([&quot;openstack.roles.%s&quot; % role[&apos;name&apos;].lower()
                      for role in user.roles])
    service_perms = set([&quot;openstack.services.%s&quot; % service[&apos;type&apos;].lower()
                      for service in user.service_catalog])
    name_perms = set([&quot;openstack.username.%s&quot; % user.username.lower()])
    return role_perms | service_perms | name_perms
</code></pre><p>è¿™æ ·å°±å¢åŠ äº†name_permsï¼Œæ‰“å°å‡ºæ¥å¦‚ä¸‹ï¼š</p>
<pre><code>set([u&apos;openstack.services.compute&apos;, u&apos;openstack.username.youwangqiu&apos;, u&apos;openstack.services.orchestration&apos;, u&apos;openstack.services.identity&apos;, u&apos;openstack.roles
.keystoneserviceadmin&apos;, u&apos;openstack.services.network&apos;, u&apos;openstack.roles.keystoneadmin&apos;, u&apos;openstack.services.volume&apos;, u&apos;openstack.services.ec2&apos;, u&apos;openstack.roles.admin&apos;, u&apos;openstack.services.image&apos;])
</code></pre><p>è¿™æ ·åªæ˜¯è®©ç”¨æˆ·æœ‰äº†è¿™ä¸ªæƒé™å­—æ®µï¼Œæ€ä¹ˆè®©dashboardå’ŒpanelçŸ¥é“å‘¢ï¼Ÿè¿™å°±è¦åˆ°</p>
<pre><code>/usr/share/openstack-dashboard/openstack_dashboard/dashboards
</code></pre><p>è¿™ä¸ªç›®å½•ä¸‹æ¥çœ‹ã€‚</p>
<pre><code>root@contrail-you:/usr/share/openstack-dashboard/openstack_dashboard/dashboards# ls
admin  __init__.py  __init__.pyc  project  router  settings
</code></pre><p>è¿™é‡Œçš„adminï¼Œprojectï¼Œrouterå’Œsettingå°±æ˜¯4ä¸ªç‹¬ç«‹çš„dashboardï¼Œå› ä¸ºæ˜¯é™åˆ¶ç®¡ç†å‘˜ç•Œé¢ï¼Œå¾ˆæ˜æ˜¾ï¼Œåº”è¯¥æ˜¯<code>admin</code>è¿™ä¸ªdashboardã€‚</p>
<p>è¿™ä¸ªdashboardçš„ç±»ä¼¼äºconfigæ–‡ä»¶åœ¨dashboard.pyæ–‡ä»¶ä¸­</p>
<pre><code>import horizon


class SystemPanels(horizon.PanelGroup):
    slug = &quot;admin&quot;
    name = _(&quot;System Panel&quot;)
    panels = (&apos;overview&apos;, &apos;metering&apos;, &apos;hypervisors&apos;, &apos;aggregates&apos;,
              &apos;instances&apos;, &apos;volumes&apos;, &apos;flavors&apos;, &apos;images&apos;,
              &apos;networks&apos;, &apos;routers&apos;, &apos;info&apos;)

class IdentityPanels(horizon.PanelGroup):
    slug = &quot;identity&quot;
    name = _(&quot;Identity Panel&quot;)
    panels = (&apos;domains&apos;, &apos;projects&apos;, &apos;users&apos;, &apos;groups&apos;, &apos;roles&apos;)        

class Admin(horizon.Dashboard):
    name = _(&quot;Admin&quot;)
    slug = &quot;admin&quot;
    panels = (SystemPanels, IdentityPanels)

    default_panel = &apos;overview&apos;
    permissions = (&apos;openstack.roles.admin&apos;,)


horizon.register(Admin)
</code></pre><p>å¯ä»¥çœ‹åˆ°æ˜¾ç¤ºadminè¿™ä¸ªdashboardçš„æƒé™æ˜¯rolesä¸ºadmin(<code>permissions = (&#39;openstack.roles.admin&#39;,)</code>)ï¼Œéå¸¸å®¹æ˜“æƒ³åˆ°æˆ‘ä»¬æŠŠpermissionè¿™ä¹ˆæ”¹ä¸å°±è¡Œäº†ï¼š</p>
<pre><code>permissions = (&apos;openstack.username.admin&apos;,&apos;openstack.roles.admin&apos;,)
</code></pre><p>éå¸¸é—æ†¾ï¼Œå¦‚æœè¿™ä¹ˆä¿®æ”¹ï¼Œ<code>SystemPanels</code>å’Œ<code>IdentityPanels</code>å¯¹äºéadminç”¨æˆ·åçš„ç”¨æˆ·éƒ½ä¸ä¼šæ˜¾ç¤ºï¼Œä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•è®¿é—®ã€‚é‚£èƒ½ä¸èƒ½å•ç‹¬ç»™IdentityPanelså¢åŠ permissionå‘¢ï¼Ÿç­”æ¡ˆä¹Ÿæ˜¯å¦å®šçš„ï¼ŒIdentityPanelsç»§æ‰¿çš„ç±»å¹¶ä¸æ”¯æŒpermissionå­—æ®µï¼Œå¦‚æœä½ ç¡¬æ˜¯è¦ç»™ä»–åŠ ä¸Šæ”¯æŒï¼Œé‚£åº”è¯¥ä¼šæœ‰å¾ˆå¤§çš„å·¥ä½œé‡ã€‚</p>
<blockquote>
<p>å…¶å®2014ç‰ˆçš„dashboardå·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œåœ¨2014ç‰ˆé‡Œï¼Œidentityæ˜¯ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„dashboardå­˜åœ¨çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¢åŠ permissionçš„å†…å®¹è€Œæ— éœ€æ‹…å¿ƒå½±å“åˆ«çš„ç”¨æˆ·äº†ï¼Œç¬”è€…ç”¨çš„æ˜¯2012ç‰ˆ</p>
</blockquote>
<p>å¦‚ä½•æ˜¯å¥½å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªç¬¨æ–¹æ³•!</p>
<p>åœ¨dashboardå±‚é¢ä¸èƒ½é™åˆ¶çš„è¯æˆ‘ä»¬å¯ä»¥åœ¨panelå±‚é¢é™åˆ¶å•Šï¼</p>
<p>ä»¥<strong>ç”¨æˆ·</strong>è¿™ä¸ªpanelä¸ºä¾‹ï¼Œä¿®æ”¹</p>
<pre><code>/usr/share/openstack-dashboard/openstack_dashboard/dashboards/admin/users/panel.py
</code></pre><p>å°†è¿™ä¸ªæ–‡ä»¶ä¿®æ”¹ä¸ºï¼š</p>
<pre><code>from django.utils.translation import ugettext_lazy as _

import horizon

from openstack_dashboard.dashboards.admin import dashboard


class Users(horizon.Panel):
    name = _(&quot;Users&quot;)
    slug = &apos;users&apos;
    permissions = (&apos;openstack.username.admin&apos;,) #å¢åŠ è¿™ä¸€è¡Œ


dashboard.Admin.register(Users)
</code></pre><p>å…¶å®å°±æ˜¯å¢åŠ äº†permissionè¿™ä¸€è¡Œï¼Œç°åœ¨å¯ä»¥ç™»å½•çœ‹ä¸€ä¸‹äº†ï¼Œä½ ä¼šå‘ç°<strong>ç”¨æˆ·</strong>è¿™ä¸ªå­é¡¹ç›®å·²ç»ä¸è§äº†ï¼Œå¤§åŠŸå‘Šæˆï¼Œå¦‚æœè¦æŠŠç®¡ç†å‘˜è¿™æ•´ä¸ªdashboardææ¶ˆå¤±ï¼Œåªéœ€è¦å°†è¿™ä¸ªdashboardé‡Œçš„æ‰€æœ‰paneléƒ½åŠ ä¸Špermissionåšé™åˆ¶å°±å¯ä»¥äº†ã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒçƒ¦ï¼Œä½†æ˜¯åº”ç”¨äº†permissionçš„æ€æƒ³ï¼Œæˆ‘æ¯”è¾ƒå€¾å‘äºè¿™ä¸ªæ–¹æ³•ã€‚æ–¹æ³•äºŒæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦æ”¹åŠ¨ä¸€å¤„ã€‚</p>
<p>##æ–¹æ³•äºŒï¼šåœ¨ç”Ÿæˆé¡µé¢ä¹‹å‰</p>
<p>æ¯•ç«Ÿæ˜¯ä¸ªwebï¼Œæ€»æ˜¯è¦ç”Ÿæˆhtmlçš„ï¼Œåœ¨è¿™äº›htmlé‡Œæœç´¢ä¸€ä¸‹ä¼šå‘ç°ï¼Œå·¦è¾¹çš„å¯¼èˆªæ æ˜¯ç”¨<code>horizon_nav</code>è¿™ä¸ªå‡½æ•°ç”Ÿæˆçš„ã€‚è·¯å¾„å¦‚ä¸‹ï¼š</p>
<pre><code>/usr/lib/python2.7/dist-packages/horizon/templatetags/horizon.py
</code></pre><p>è¿™ä¸ªå‡½æ•°æ˜¯ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°æ¨¡ç‰ˆä¸­å»çš„ï¼Œåªè¦åœ¨è¿™é‡Œä¿®æ”¹dashboardå°±èƒ½è®©adminæ ä¸æ˜¾ç¤º</p>
<p>åŸç†å¾ˆç®€å•ï¼Œå¯¹éadminç”¨æˆ·åçš„ç”¨æˆ·ï¼Œå°†dashboardé‡Œçš„adminè¿™ä¸ªdashboardåˆ æ‰ï¼Œåªä¿ç•™projectè¿™ä¸ªdashboardã€‚å½“ç„¶å°‘ä¸äº†ä¸€äº›è°ƒè¯•ï¼Œå¦‚æœä½ æœ‰ä¸€äº›djangoçš„å¼€å‘ç»éªŒï¼Œåº”è¯¥å¾ˆå®¹æ˜“æå®šï¼Œä¿®æ”¹åçš„<code>horizon_nav</code>å‡½æ•°å¦‚ä¸‹ï¼š</p>
<pre><code>@register.inclusion_tag(&apos;horizon/_accordion_nav.html&apos;, takes_context=True)
def horizon_nav(context):
    if &apos;request&apos; not in context:
        return {}
    current_dashboard = context[&apos;request&apos;].horizon.get(&apos;dashboard&apos;, None)
    current_panel = context[&apos;request&apos;].horizon.get(&apos;panel&apos;, None)
    dashboards = []
    for dash in Horizon.get_dashboards():
        panel_groups = dash.get_panel_groups()
        non_empty_groups = []
        for group in panel_groups.values():
            allowed_panels = []
            for panel in group:
                if callable(panel.nav) and panel.nav(context):
                    allowed_panels.append(panel)
                elif not callable(panel.nav) and panel.nav:
                    allowed_panels.append(panel)
            if allowed_panels:
                non_empty_groups.append((group.name, allowed_panels))
        if callable(dash.nav) and dash.nav(context):
            dashboards.append((dash, SortedDict(non_empty_groups)))
        elif not callable(dash.nav) and dash.nav:
            dashboards.append((dash, SortedDict(non_empty_groups)))
    username = context[&apos;request&apos;].user.username  #**new**
    if username != &apos;admin&apos;:  #**new**
        dashboards = [dashboard for dashboard in dashboards if dashboards[0].slug != &apos;admin&apos;]    #**new**
    return {&apos;components&apos;: dashboards,
            &apos;user&apos;: context[&apos;request&apos;].user,
            &apos;current&apos;: current_dashboard,
            &apos;current_panel&apos;: current_panel.slug if current_panel else &apos;&apos;, 
            &apos;request&apos;: context[&apos;request&apos;]}
</code></pre><p><strong>NOTE:æ³¨æ„ä¿®æ”¹ä¹‹ååŠ¡å¿…é‡å¯web</strong></p>
<p>æœ‰ä¸æ˜ç™½ä¹‹å¤„ï¼Œå¯ä»¥è”ç³»ï¼šwq_you@163.com</p>
<p>##å‚è€ƒèµ„æ–™</p>
<p><a href="http://www.cnblogs.com/yuxc/p/3419102.html" target="_blank" rel="external">Horizon Is Easy, Horizon Is Complex</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/14/pipå‡çº§å®‰è£…è¿‡çš„åŒ…/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/14/pipå‡çº§å®‰è£…è¿‡çš„åŒ…/" itemprop="url">pipå‡çº§å®‰è£…è¿‡çš„åŒ…</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-14T13:44:47+08:00">
                2015-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆpip â€“helpä¸æ˜¾ç¤ºå‡çº§å®‰è£…åŒ…çš„å‘½ä»¤</p>
<p>å…¶å®å¾ˆç®€å•ï¼ŒåŠ ä¸Š-Ué€‰é¡¹å°±æ˜¯å‡çº§è¿™ä¸ªæ¨¡å—</p>
<p>for example:</p>
<pre><code>pip install -U setuptools
</code></pre><p>è¿™ä¸ªæ“ä½œå°±æ˜¯å‡çº§setuptoolsæ¨¡å—</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/14/gitåœ¨ç½‘ç»œä»£ç†ä¸‹çš„ä½¿ç”¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/14/gitåœ¨ç½‘ç»œä»£ç†ä¸‹çš„ä½¿ç”¨/" itemprop="url">gitåœ¨ç½‘ç»œä»£ç†ä¸‹çš„ä½¿ç”¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-14T13:27:41+08:00">
                2015-05-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å…¬å¸çš„æµ‹è¯•ç¯å¢ƒä¸å…è®¸ç›´æ¥è¿å¤–ç½‘ï¼Œæ‰€ä»¥æƒ³ä»æµ‹è¯•æœºè¿åˆ°å¤–ç½‘åªèƒ½ç”¨ä»£ç†ã€‚é…ç½®å¥½ä»£ç†åå¯¼å‡ºç¯å¢ƒå˜é‡å³å¯ï¼š</p>
<pre><code>export http_proxy=http://10.10.1.2:8080
export https_proxy=http://10.10.1.2:8080
</code></pre><p>ç½‘ç»œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘å‘ç°ï¼Œgitç”¨ä¸äº†äº†ï¼Œå¥½æ‰é¸¡å•Šï¼Œæ²¡æœ‰äº†gitè¿˜å¹²ä¸ªæ¯›çº¿å•Šï¼Œè‡ªå·±å„ç§ä¸Šç½‘æ‰¾æ–¹æ¡ˆï¼ŒæŠ˜è…¾äº†ä¸€å¤©éƒ½æ²¡æå®šï¼Œæœ€åè¿˜æ˜¯è¯·æ•™äº†åŒäº‹ï¼Œå‘ç°è‡ªå·±è¿™ä¸ªåŸºç¡€å•Šï¼Œå®åœ¨å¤ªå·®äº†ï¼</p>
<p>Git å¯ä»¥ä½¿ç”¨å››ç§ä¸»è¦çš„åè®®æ¥ä¼ è¾“æ•°æ®ï¼šæœ¬åœ°ä¼ è¾“(file)ï¼Œssh åè®®ï¼ŒGit åè®®å’Œ HTTPS åè®®ã€‚</p>
<p>æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯ä½ cloneç”¨çš„urlçš„å‰ç¼€æ˜¯ä¸åŒçš„ã€‚</p>
<blockquote>
<p>æœ¬åœ°åè®®ï¼šgit clone file:///opt/git/project.git</p>
<p>SSHåè®®ï¼šgit clone ssh://user@server/project.git</p>
<p>HTTPSåè®®ï¼šgit clone <a href="http://example.com/gitproject.git" target="_blank" rel="external">http://example.com/gitproject.git</a></p>
<p>GITåè®®ï¼šgit clone git@github.com:username/project.git</p>
</blockquote>
<p>æˆ‘ä»¬å¹³æ—¶ç”¨çš„æ˜¯ä¸€èˆ¬æ˜¯githubæä¾›çš„æœåŠ¡ï¼Œä»<a href="www.github.com">githubç½‘ç«™</a>ä¸Šçœ‹ï¼Œgithubæä¾›äº†<a href="https://help.github.com/articles/which-remote-url-should-i-use/" target="_blank" rel="external">gitåè®®å’Œhttpsåè®®</a></p>
<p><img src="/img/github.png" alt=""></p>
<p>æˆ‘ä»¬cloneçš„æ—¶å€™ä¸€èˆ¬å°±æ˜¯ç”¨çº¢åœˆä¸­çš„åœ°å€ï¼Œä½†æ˜¯è¿™ä¸ªåœ°å€æ˜¯gitåè®®çš„ï¼Œè€Œæˆ‘çš„ç”µè„‘æ˜¯é€šè¿‡ä»£ç†ç™»å½•çš„åªæ”¯æŒhttpå’Œhttpsï¼Œæ‰€ä»¥å½“ç„¶ä¸èƒ½ä½¿ç”¨git</p>
<p>æœ‰äººä¼šé—®ï¼Œæˆ‘èƒ½ä¸èƒ½å¯¼å‡º<code>ssh_proxy</code>å’Œ<code>git_proxy</code>å‘¢ï¼Ÿå½“ç„¶ï¼Œå‰ææ˜¯ä½ çš„ä»£ç†æœåŠ¡å™¨æ”¯æŒè¿™æ ·åšã€‚å¦‚æœä½ çš„ä»£ç†æœåŠ¡å™¨ä¸æ”¯æŒï¼Œè€Œä½ åˆæ²¡æœ‰åŠæ³•å»æ”¹ï¼Œé‚£ä½ å¯ä»¥<strong>ä¸ç”¨git@å¼€å¤´çš„urlï¼Œè€Œæ˜¯ä½¿ç”¨httpså¼€å¤´çš„url</strong></p>
<p><strong>å®Œ</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/08/pythonçº¿ç¨‹åˆæ¢/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/08/pythonçº¿ç¨‹åˆæ¢/" itemprop="url">pythonçº¿ç¨‹åˆæ¢</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-08T11:22:20+08:00">
                2015-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æˆ‘ä»¬å°†ä¼šçœ‹åˆ°ä¸€äº›åœ¨Pythonä¸­ä½¿ç”¨çº¿ç¨‹çš„å®ä¾‹å’Œå¦‚ä½•é¿å…çº¿ç¨‹ä¹‹é—´çš„ç«äº‰ã€‚ä½ åº”å½“å°†ä¸‹è¾¹çš„ä¾‹å­è¿è¡Œå¤šæ¬¡ï¼Œä»¥ä¾¿å¯ä»¥æ³¨æ„åˆ°çº¿ç¨‹æ˜¯ä¸å¯é¢„æµ‹çš„å’Œçº¿ç¨‹æ¯æ¬¡è¿è¡Œå‡ºçš„ä¸åŒç»“æœã€‚å£°æ˜ï¼šä»è¿™é‡Œå¼€å§‹å¿˜æ‰ä½ å¬åˆ°è¿‡çš„å…³äºGILçš„ä¸œè¥¿ï¼Œå› ä¸ºGILä¸ä¼šå½±å“åˆ°æˆ‘æƒ³è¦å±•ç¤ºçš„ä¸œè¥¿ã€‚</p>
<p>##ç¤ºä¾‹1</p>
<p>æˆ‘ä»¬å°†è¦è¯·æ±‚äº”ä¸ªä¸åŒçš„urlï¼š</p>
<p>å•çº¿ç¨‹</p>
<pre><code>import time
import urllib2

def get_responses():
    urls = [
        &apos;http://www.google.com&apos;,
        &apos;http://www.amazon.com&apos;,
        &apos;http://www.ebay.com&apos;,
        &apos;http://www.alibaba.com&apos;,
        &apos;http://www.reddit.com&apos;
    ]
    start = time.time()
    for url in urls:
        print url
        resp = urllib2.urlopen(url)
        print resp.getcode()
    print &quot;Elapsed time: %s&quot; % (time.time()-start)

get_responses()
</code></pre><p>è¾“å‡ºæ˜¯ï¼š</p>
<pre><code>http://www.google.com 200
http://www.amazon.com 200
http://www.ebay.com 200
http://www.alibaba.com 200
http://www.reddit.com 200
Elapsed time: 3.0814409256
</code></pre><p>è§£é‡Šï¼š</p>
<ul>
<li>urlé¡ºåºçš„è¢«è¯·æ±‚</li>
<li>é™¤écpuä»ä¸€ä¸ªurlè·å¾—äº†å›åº”ï¼Œå¦åˆ™ä¸ä¼šå»è¯·æ±‚ä¸‹ä¸€ä¸ªurl</li>
<li>ç½‘ç»œè¯·æ±‚ä¼šèŠ±è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œæ‰€ä»¥cpuåœ¨ç­‰å¾…ç½‘ç»œè¯·æ±‚çš„è¿”å›æ—¶é—´å†…ä¸€ç›´å¤„äºé—²ç½®çŠ¶æ€ã€‚<br>##å¤šçº¿ç¨‹</li>
</ul>
<pre><code>import urllib2
import time
from threading import Thread

class GetUrlThread(Thread):
    def __init__(self, url):
        self.url = url 
        super(GetUrlThread, self).__init__()

    def run(self):
        resp = urllib2.urlopen(self.url)
        print self.url, resp.getcode()

def get_responses():
    urls = [
        &apos;http://www.google.com&apos;, 
        &apos;http://www.amazon.com&apos;, 
        &apos;http://www.ebay.com&apos;, 
        &apos;http://www.alibaba.com&apos;, 
        &apos;http://www.reddit.com&apos;
    ]
    start = time.time()
    threads = []
    for url in urls:
        t = GetUrlThread(url)
        threads.append(t)
        t.start()
    for t in threads:
        t.join()
    print &quot;Elapsed time: %s&quot; % (time.time()-start)

get_responses()
</code></pre><p>è¾“å‡ºï¼š</p>
<pre><code>http://www.reddit.com 200
http://www.google.com 200
http://www.amazon.com 200
http://www.alibaba.com 200
http://www.ebay.com 200
Elapsed time: 0.689890861511
</code></pre><p>è§£é‡Šï¼š</p>
<ul>
<li>æ„è¯†åˆ°äº†ç¨‹åºåœ¨æ‰§è¡Œæ—¶é—´ä¸Šçš„æå‡</li>
<li>æˆ‘ä»¬å†™äº†ä¸€ä¸ªå¤šçº¿ç¨‹ç¨‹åºæ¥å‡å°‘cpuçš„ç­‰å¾…æ—¶é—´ï¼Œå½“æˆ‘ä»¬åœ¨ç­‰å¾…ä¸€ä¸ªçº¿ç¨‹å†…çš„ç½‘ç»œè¯·æ±‚è¿”å›æ—¶ï¼Œè¿™æ—¶cpuå¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–çº¿ç¨‹å»è¿›è¡Œå…¶ä»–çº¿ç¨‹å†…çš„ç½‘ç»œè¯·æ±‚ã€‚</li>
<li>æˆ‘ä»¬æœŸæœ›ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€ä¸ªurlï¼Œæ‰€ä»¥å®ä¾‹åŒ–çº¿ç¨‹ç±»çš„æ—¶å€™æˆ‘ä»¬ä¼ äº†ä¸€ä¸ªurlã€‚</li>
<li>çº¿ç¨‹è¿è¡Œæ„å‘³ç€æ‰§è¡Œç±»é‡Œçš„run()æ–¹æ³•ã€‚</li>
<li>æ— è®ºå¦‚ä½•æˆ‘ä»¬æƒ³æ¯ä¸ªçº¿ç¨‹å¿…é¡»æ‰§è¡Œrun()ã€‚</li>
<li>ä¸ºæ¯ä¸ªurlåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¹¶ä¸”è°ƒç”¨start()æ–¹æ³•ï¼Œè¿™å‘Šè¯‰äº†cpuå¯ä»¥æ‰§è¡Œçº¿ç¨‹ä¸­çš„run()æ–¹æ³•äº†ã€‚</li>
<li>æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™å†è®¡ç®—èŠ±è´¹çš„æ—¶é—´ï¼Œæ‰€ä»¥è°ƒç”¨äº†join()æ–¹æ³•ã€‚</li>
<li>join()å¯ä»¥é€šçŸ¥ä¸»çº¿ç¨‹ç­‰å¾…è¿™ä¸ªçº¿ç¨‹ç»“æŸåï¼Œæ‰å¯ä»¥æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</li>
<li>æ¯ä¸ªçº¿ç¨‹æˆ‘ä»¬éƒ½è°ƒç”¨äº†join()æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯åœ¨æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åè®¡ç®—çš„è¿è¡Œæ—¶é—´ã€‚</li>
</ul>
<p>å…³äºçº¿ç¨‹ï¼š</p>
<ul>
<li>cpuå¯èƒ½ä¸ä¼šåœ¨è°ƒç”¨start()åé©¬ä¸Šæ‰§è¡Œrun()æ–¹æ³•ã€‚</li>
<li>ä½ ä¸èƒ½ç¡®å®šrun()åœ¨ä¸åŒçº¿ç¨‹å»ºé—´çš„æ‰§è¡Œé¡ºåºã€‚</li>
<li>å¯¹äºå•ç‹¬çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥ä¿è¯run()æ–¹æ³•é‡Œçš„è¯­å¥æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„ã€‚</li>
<li>è¿™å°±æ˜¯å› ä¸ºçº¿ç¨‹å†…çš„urlä¼šé¦–å…ˆè¢«è¯·æ±‚ï¼Œç„¶åæ‰“å°å‡ºè¿”å›çš„ç»“æœã€‚<br>##ç¤ºä¾‹2<br>æˆ‘ä»¬å°†ä¼šç”¨ä¸€ä¸ªç¨‹åºæ¼”ç¤ºä¸€ä¸‹å¤šçº¿ç¨‹é—´çš„èµ„æºç«äº‰ï¼Œå¹¶ä¿®å¤è¿™ä¸ªé—®é¢˜ã€‚</li>
</ul>
<pre><code>from threading import Thread

#define a global variable
some_var = 0

class IncrementThread(Thread):
    def run(self):
        #we want to read a global variable
        #and then increment it
        global some_var
        read_value = some_var
        print &quot;some_var in %s is %d&quot; % (self.name, read_value)
        some_var = read_value + 1
        print &quot;some_var in %s after increment is %d&quot; % (self.name, some_var)

def use_increment_thread():
    threads = []
    for i in range(50):
        t = IncrementThread()
        threads.append(t)
        t.start()
    for t in threads:
        t.join()
    print &quot;After 50 modifications, some_var should have become 50&quot;
    print &quot;After 50 modifications, some_var is %d&quot; % (some_var,)

use_increment_thread()
</code></pre><p>å¤šæ¬¡è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ ä¼šçœ‹åˆ°å¤šç§ä¸åŒçš„ç»“æœã€‚</p>
<p>è§£é‡Šï¼š</p>
<ul>
<li>æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½æƒ³ä¿®æ”¹å®ƒã€‚</li>
<li>æ‰€æœ‰çš„çº¿ç¨‹åº”è¯¥åœ¨è¿™ä¸ªå…¨å±€å˜é‡ä¸ŠåŠ  1 ã€‚</li>
<li><p>æœ‰50ä¸ªçº¿ç¨‹ï¼Œæœ€åè¿™ä¸ªæ•°å€¼åº”è¯¥å˜æˆ50ï¼Œä½†æ˜¯å®ƒå´æ²¡æœ‰ã€‚<br>ä¸ºä»€ä¹ˆæ²¡æœ‰è¾¾åˆ°50ï¼Ÿ</p>
</li>
<li><p>åœ¨some_varæ˜¯15çš„æ—¶å€™ï¼Œçº¿ç¨‹t1è¯»å–äº†some_varï¼Œè¿™ä¸ªæ—¶åˆ»cpuå°†æ§åˆ¶æƒç»™äº†å¦ä¸€ä¸ªçº¿ç¨‹t2ã€‚</p>
</li>
<li>t2çº¿ç¨‹è¯»åˆ°çš„some_varä¹Ÿæ˜¯15</li>
<li>t1å’Œt2éƒ½æŠŠsome_varåŠ åˆ°16</li>
<li>å½“æ—¶æˆ‘ä»¬æœŸæœ›çš„æ˜¯t1 t2ä¸¤ä¸ªçº¿ç¨‹ä½¿some_var + 2å˜æˆ17</li>
<li>åœ¨è¿™é‡Œå°±æœ‰äº†èµ„æºç«äº‰ã€‚</li>
<li>ç›¸åŒçš„æƒ…å†µä¹Ÿå¯èƒ½å‘ç”Ÿåœ¨å…¶å®ƒçš„çº¿ç¨‹é—´ï¼Œæ‰€ä»¥å‡ºç°äº†æœ€åçš„ç»“æœå°äº50çš„æƒ…å†µã€‚</li>
</ul>
<p>è§£å†³èµ„æºç«äº‰</p>
<pre><code>from threading import Lock, Thread
lock = Lock()
some_var = 0

class IncrementThread(Thread):
    def run(self):
        #we want to read a global variable
        #and then increment it
        global some_var
        lock.acquire()
        read_value = some_var
        print &quot;some_var in %s is %d&quot; % (self.name, read_value)
        some_var = read_value + 1
        print &quot;some_var in %s after increment is %d&quot; % (self.name, some_var)
        lock.release()

def use_increment_thread():
    threads = []
    for i in range(50):
        t = IncrementThread()
        threads.append(t)
        t.start()
    for t in threads:
        t.join()
    print &quot;After 50 modifications, some_var should have become 50&quot;
    print &quot;After 50 modifications, some_var is %d&quot; % (some_var,)

use_increment_thread()
</code></pre><p>å†æ¬¡è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œè¾¾åˆ°äº†æˆ‘ä»¬é¢„æœŸçš„ç»“æœã€‚</p>
<p>è§£é‡Šï¼š</p>
<ul>
<li>Lock ç”¨æ¥é˜²æ­¢ç«äº‰æ¡ä»¶</li>
<li>å¦‚æœåœ¨æ‰§è¡Œä¸€äº›æ“ä½œä¹‹å‰ï¼Œçº¿ç¨‹t1è·å¾—äº†é”ã€‚å…¶ä»–çš„çº¿ç¨‹åœ¨t1é‡Šæ”¾Lockä¹‹å‰ï¼Œä¸ä¼šæ‰§è¡Œç›¸åŒçš„æ“ä½œ</li>
<li>æˆ‘ä»¬æƒ³è¦ç¡®å®šçš„æ˜¯ä¸€æ—¦çº¿ç¨‹t1å·²ç»è¯»å–äº†some_varï¼Œç›´åˆ°t1å®Œæˆäº†ä¿®æ”¹some_varï¼Œå…¶ä»–çš„çº¿ç¨‹æ‰å¯ä»¥è¯»å–some_var</li>
<li>è¿™æ ·è¯»å–å’Œä¿®æ”¹some_varæˆäº†é€»è¾‘ä¸Šçš„åŸå­æ“ä½œã€‚<br>##ç¤ºä¾‹3<br>è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯æ˜ä¸€ä¸ªçº¿ç¨‹ä¸èƒ½å½±å“å…¶ä»–çº¿ç¨‹å†…çš„å˜é‡ï¼ˆéå…¨å±€å˜é‡ï¼‰ã€‚</li>
</ul>
<p>time.sleep()å¯ä»¥ä½¿ä¸€ä¸ªçº¿ç¨‹æŒ‚èµ·ï¼Œå¼ºåˆ¶çº¿ç¨‹åˆ‡æ¢å‘ç”Ÿã€‚</p>
<pre><code>from threading import Thread
import time

class CreateListThread(Thread):
    def run(self):
        self.entries = []
        for i in range(10):
            time.sleep(1)
            self.entries.append(i)
        print self.entries

def use_create_list_thread():
    for i in range(3):
        t = CreateListThread()
        t.start()

use_create_list_thread()
</code></pre><p>è¿è¡Œå‡ æ¬¡åå‘ç°å¹¶æ²¡æœ‰æ‰“å°å‡ºæ­£ç¡®çš„ç»“æœã€‚å½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨æ‰“å°çš„æ—¶å€™ï¼Œcpuåˆ‡æ¢åˆ°äº†å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥äº§ç”Ÿäº†ä¸æ­£ç¡®çš„ç»“æœã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿print self.entriesæ˜¯ä¸ªé€»è¾‘ä¸Šçš„åŸå­æ“ä½œï¼Œä»¥é˜²æ‰“å°æ—¶è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨äº†Lock()ï¼Œæ¥çœ‹ä¸‹è¾¹çš„ä¾‹å­ã€‚</p>
<pre><code>from threading import Thread, Lock
import time

lock = Lock()

class CreateListThread(Thread):
    def run(self):
        self.entries = []
        for i in range(10):
            time.sleep(1)
            self.entries.append(i)
        lock.acquire()
        print self.entries
        lock.release()

def use_create_list_thread():
    for i in range(3):
        t = CreateListThread()
        t.start()

use_create_list_thread()
</code></pre><p>è¿™æ¬¡æˆ‘ä»¬çœ‹åˆ°äº†æ­£ç¡®çš„ç»“æœã€‚è¯æ˜äº†ä¸€ä¸ªçº¿ç¨‹ä¸å¯ä»¥ä¿®æ”¹å…¶ä»–çº¿ç¨‹å†…éƒ¨çš„å˜é‡ï¼ˆéå…¨å±€å˜é‡ï¼‰ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/08/pythonç¨‹åºå‘˜é•¿å¸¸çŠ¯çš„é”™è¯¯-é«˜çº§ç¯‡/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="You Wangqiu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/lufei.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Youmai ã® Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/08/pythonç¨‹åºå‘˜é•¿å¸¸çŠ¯çš„é”™è¯¯-é«˜çº§ç¯‡/" itemprop="url">pythonç¨‹åºå‘˜é•¿å¸¸çŠ¯çš„é”™è¯¯-é«˜çº§ç¯‡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2015-05-08T10:50:11+08:00">
                2015-05-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬æ–‡è½¬è½½è‡ª<a href="http://blog.jobbole.com/68256/" target="_blank" rel="external">è¿™é‡Œ</a></p>
<p>Pythonç®€å•ã€æ˜“å­¦çš„è¯­æ³•å¯èƒ½ä¼šè¯¯å¯¼ä¸€äº›Pythonç¨‹åºå‘˜ï¼ˆç‰¹åˆ«æ˜¯é‚£äº›åˆšæ¥è§¦è¿™é—¨è¯­è¨€çš„äººä»¬ï¼‰ï¼Œå¯èƒ½ä¼šå¿½ç•¥æŸäº›ç»†å¾®ä¹‹å¤„å’Œè¿™é—¨è¯­è¨€çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p>è€ƒè™‘åˆ°è¿™ç‚¹ï¼Œæœ¬æ–‡åˆ—å‡ºäº†â€œåå¤§â€ç”šè‡³æ˜¯é«˜çº§çš„Pythonç¨‹åºå‘˜éƒ½å¯èƒ½çŠ¯çš„ï¼Œå´åˆä¸å®¹æ˜“å‘ç°çš„ç»†å¾®é”™è¯¯ã€‚</p>
<p>##åœ¨å‡½æ•°å‚æ•°ä¸­ä¹±ç”¨è¡¨è¾¾å¼ä½œä¸ºé»˜è®¤å€¼</p>
<p>Pythonå…è®¸ç»™ä¸€ä¸ªå‡½æ•°çš„æŸä¸ªå‚æ•°è®¾ç½®<strong>é»˜è®¤å€¼</strong>ä»¥ä½¿è¯¥å‚æ•°æˆä¸ºä¸€ä¸ª<strong>å¯é€‰å‚æ•°</strong>ã€‚å°½ç®¡è¿™æ˜¯è¿™é—¨è¯­è¨€å¾ˆæ£’çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯è¿™å½“è¿™ä¸ªé»˜è®¤å€¼æ˜¯<strong>å¯å˜å¯¹è±¡</strong>ï¼ˆ<a href="https://docs.python.org/2/reference/datamodel.html" target="_blank" rel="external">mutable</a>ï¼‰æ—¶ï¼Œé‚£å°±æœ‰äº›éº»çƒ¦äº†ã€‚ä¾‹å¦‚ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªPythonå‡½æ•°å®šä¹‰ï¼š</p>
<pre><code>&gt;&gt;&gt; def foo(bar=[]):        # baræ˜¯å¯é€‰å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰æŒ‡æ˜çš„è¯ï¼Œé»˜è®¤å€¼æ˜¯[]
...    bar.append(&quot;baz&quot;)    # ä½†æ˜¯è¿™è¡Œå¯æ˜¯æœ‰é—®é¢˜çš„ï¼Œèµ°ç€ç§â€¦
...    return bar
</code></pre><p>äººä»¬å¸¸çŠ¯çš„ä¸€ä¸ªé”™è¯¯æ˜¯è®¤ä¸º<strong>æ¯æ¬¡</strong>è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ä¸ç»™è¿™ä¸ªå¯é€‰å‚æ•°èµ‹å€¼çš„è¯ï¼Œå®ƒæ€»æ˜¯ä¼šè¢«èµ‹äºˆè¿™ä¸ªé»˜è®¤è¡¨è¾¾å¼çš„å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç¨‹åºå‘˜å¯èƒ½ä¼šè®¤ä¸ºé‡å¤è°ƒç”¨å‡½æ•°foo() ï¼ˆä¸ä¼ å‚æ•°barç»™è¿™ä¸ªå‡½æ•°ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ€»æ˜¯è¿”å›â€˜bazâ€™ï¼Œå› ä¸ºæˆ‘ä»¬å‡å®šè®¤ä¸ºæ¯æ¬¡è°ƒç”¨foo()çš„æ—¶å€™ï¼ˆä¸ä¼ barï¼‰ï¼Œå‚æ•°barä¼šè¢«ç½®ä¸º[]ï¼ˆå³ï¼Œä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼‰ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¹ˆåšçš„æ—¶å€™ç©¶ç«Ÿä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<pre><code>&gt;&gt;&gt; foo()
[&quot;baz&quot;]
&gt;&gt;&gt; foo()
[&quot;baz&quot;, &quot;baz&quot;]
&gt;&gt;&gt; foo()
[&quot;baz&quot;, &quot;baz&quot;, &quot;baz&quot;]
</code></pre><p>å—¯ï¼Ÿä¸ºä»€ä¹ˆæ¯æ¬¡è°ƒç”¨foo()çš„æ—¶å€™ï¼Œè¿™ä¸ªå‡½æ•°æ€»æ˜¯åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„åˆ—è¡¨åé¢æ·»åŠ æˆ‘ä»¬çš„é»˜è®¤å€¼â€œbazâ€ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ª<strong>æ–°</strong>çš„åˆ—è¡¨ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯<strong>ä¸€ä¸ªå‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ï¼Œä»…ä»…åœ¨è¯¥å‡½æ•°å®šä¹‰çš„æ—¶å€™ï¼Œè¢«èµ‹å€¼ä¸€æ¬¡</strong>ã€‚å¦‚æ­¤ï¼Œåªæœ‰å½“å‡½æ•°foo()ç¬¬ä¸€æ¬¡è¢«å®šä¹‰çš„æ—¶å€™ï¼Œæ‰è®²å‚æ•°barçš„é»˜è®¤å€¼åˆå§‹åŒ–åˆ°å®ƒçš„é»˜è®¤å€¼ï¼ˆå³ä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼‰ã€‚å½“è°ƒç”¨foo()çš„æ—¶å€™ï¼ˆä¸ç»™å‚æ•°barï¼‰ï¼Œä¼šç»§ç»­ä½¿ç”¨baræœ€æ—©åˆå§‹åŒ–æ—¶çš„é‚£ä¸ªåˆ—è¡¨ã€‚</p>
<p>ç”±æ­¤ï¼Œå¯ä»¥æœ‰å¦‚ä¸‹çš„è§£å†³åŠæ³•ï¼š</p>
<pre><code>&gt;&gt;&gt; def foo(bar=None):
...    if bar is None:      # æˆ–è€…ç”¨ if not bar:
...        bar = []
...    bar.append(&quot;baz&quot;)
...    return bar
...
&gt;&gt;&gt; foo()
[&quot;baz&quot;]
&gt;&gt;&gt; foo()
[&quot;baz&quot;]
&gt;&gt;&gt; foo()
[&quot;baz&quot;]
</code></pre><p>##ä¸æ­£ç¡®çš„ä½¿ç”¨ç±»å˜é‡</p>
<p>çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>&gt;&gt;&gt; class A(object):
...     x = 1
...
&gt;&gt;&gt; class B(A):
...     pass
...
&gt;&gt;&gt; class C(A):
...     pass
...
&gt;&gt;&gt; print A.x, B.x, C.x
1 1 1
</code></pre><p>çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ã€‚</p>
<pre><code>&gt;&gt;&gt; B.x = 2
&gt;&gt;&gt; print A.x, B.x, C.x
1 2 1
</code></pre><p>å—¯å“ˆï¼Œè¿˜æ˜¯å’Œé¢„æƒ³çš„ä¸€æ ·ã€‚</p>
<pre><code>&gt;&gt;&gt; A.x = 3
&gt;&gt;&gt; print A.x, B.x, C.x
3 2 3
</code></pre><p>æˆ‘äº†ä¸ªå»ã€‚åªæ˜¯æ”¹å˜äº†A.xï¼Œä¸ºå•¥C.xä¹Ÿå˜äº†ï¼Ÿ</p>
<p>åœ¨Pythoné‡Œï¼Œç±»å˜é‡é€šå¸¸åœ¨å†…éƒ¨è¢«å½“åšå­—å…¸æ¥å¤„ç†å¹¶éµå¾ªé€šå¸¸æ‰€è¯´çš„æ–¹æ³•è§£æé¡ºåºï¼ˆ<a href="http://python-history.blogspot.com.ar/2010/06/method-resolution-order.html" target="_blank" rel="external">Method Resolution Order (MRO)</a>ï¼‰ã€‚å› æ­¤åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå› ä¸ºå±æ€§xåœ¨ç±»Cä¸­æ‰¾ä¸åˆ°ï¼Œå› æ­¤å®ƒä¼šå¾€ä¸Šå»å®ƒçš„åŸºç±»ä¸­æŸ¥æ‰¾ï¼ˆåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­åªæœ‰Aè¿™ä¸ªç±»ï¼Œå½“ç„¶Pythonæ˜¯æ”¯æŒå¤šé‡ç»§æ‰¿ï¼ˆmultiple inheritanceï¼‰çš„ï¼‰ã€‚æ¢å¥è¯è¯´ï¼ŒCæ²¡æœ‰å®ƒè‡ªå·±ç‹¬ç«‹äºAçš„å±æ€§xã€‚å› æ­¤å¯¹C.xçš„å¼•ç”¨å®é™…ä¸Šæ˜¯å¯¹A.xçš„å¼•ç”¨ã€‚ï¼ˆB.xä¸æ˜¯å¯¹A.xçš„å¼•ç”¨æ˜¯å› ä¸ºåœ¨ç¬¬äºŒæ­¥é‡ŒB.x=2å°†B.xå¼•ç”¨åˆ°äº†2è¿™ä¸ªå¯¹è±¡ä¸Šï¼Œå€˜è‹¥æ²¡æœ‰å¦‚æ­¤ï¼ŒB.xä»ç„¶æ˜¯å¼•ç”¨åˆ°A.xä¸Šçš„ã€‚ï¼‰</p>
<p>##åœ¨å¼‚å¸¸å¤„ç†æ—¶é”™è¯¯çš„ä½¿ç”¨å‚æ•°</p>
<p>å‡è®¾ä½ æœ‰å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<pre><code>&gt;&gt;&gt; try:
...     l = [&quot;a&quot;, &quot;b&quot;]
...     int(l[2])
... except ValueError, IndexError:  # æƒ³æ•æ‰ä¸¤ä¸ªå¼‚å¸¸
...     pass
...
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 3, in &lt;module&gt;
IndexError: list index out of range
</code></pre><p>è¿™é‡Œçš„é—®é¢˜åœ¨äºexceptè¯­å¥<strong>ä¸ä¼š</strong>åƒè¿™æ ·å»æ¥å—ä¸€ç³»åˆ—çš„å¼‚å¸¸ã€‚å¹¶ä¸”ï¼Œåœ¨Python 2.xé‡Œé¢ï¼Œè¯­æ³•<code>except Exception, e</code>æ˜¯ç”¨æ¥å°†å¼‚å¸¸å’Œè¿™ä¸ªå¯é€‰çš„å‚æ•°ç»‘å®šèµ·æ¥ï¼ˆå³è¿™é‡Œçš„eï¼‰ï¼Œä»¥ç”¨æ¥åœ¨åé¢æŸ¥çœ‹çš„ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒIndexErrorå¼‚å¸¸<strong>ä¸ä¼š</strong>è¢«exceptè¯­å¥æ•æ‰åˆ°ï¼›è€Œæœ€ç»ˆValueErrorè¿™ä¸ªå¼‚å¸¸è¢«ç»‘å®šåœ¨äº†ä¸€ä¸ªå«åšIndexErrorçš„å‚æ•°ä¸Šã€‚</p>
<p>åœ¨exceptè¯­å¥ä¸­æ•æ‰å¤šä¸ªå¼‚å¸¸çš„æ­£ç¡®åšæ³•æ˜¯å°†æ‰€æœ‰æƒ³è¦æ•æ‰çš„å¼‚å¸¸æ”¾åœ¨ä¸€ä¸ªå…ƒç»„ï¼ˆ<a href="https://docs.python.org/2/tutorial/datastructures.html#tut-tuples" target="_blank" rel="external">tuple</a>ï¼‰é‡Œå¹¶ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ç»™exceptè¯­å¥ã€‚å¹¶ä¸”ï¼Œä¸ºç§»æ¤æ€§è€ƒè™‘ï¼Œä½¿ç”¨aså…³é”®å­—ï¼Œå› ä¸ºPython 2å’ŒPython 3éƒ½æ”¯æŒè¿™æ ·çš„è¯­æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>&gt;&gt;&gt; try:
...     l = [&quot;a&quot;, &quot;b&quot;]
...     int(l[2])
... except (ValueError, IndexError) as e:  
...     pass
...
&gt;&gt;&gt;
</code></pre><p>##è¯¯è§£Pythonä½œç”¨åŸŸçš„è§„åˆ™</p>
<p>Pythonçš„ä½œç”¨åŸŸè§£ææ˜¯åŸºäºå«åš<a href="https://blog.mozilla.org/webdev/2011/01/31/python-scoping-understanding-legb/" target="_blank" rel="external">LEGB</a>ï¼ˆLocalï¼ˆæœ¬åœ°ï¼‰ï¼ŒEnclosingï¼ˆå°é—­ï¼‰ï¼ŒGlobalï¼ˆå…¨å±€ï¼‰ï¼ŒBuilt-inï¼ˆå†…ç½®ï¼‰ï¼‰çš„è§„åˆ™è¿›è¡Œæ“ä½œçš„ã€‚è¿™çœ‹èµ·æ¥å¾ˆç›´è§‚ï¼Œå¯¹å§ï¼Ÿäº‹å®ä¸Šï¼Œåœ¨Pythonä¸­è¿™æœ‰ä¸€äº›ç»†å¾®çš„åœ°æ–¹å¾ˆå®¹æ˜“å‡ºé”™ã€‚çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code>&gt;&gt;&gt; x = 10
&gt;&gt;&gt; def foo():
...     x += 1
...     print x
...
&gt;&gt;&gt; foo()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 2, in foo
UnboundLocalError: local variable &apos;x&apos; referenced before assignment
</code></pre><p>è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸ºï¼Œåœ¨ä¸€ä¸ªä½œç”¨åŸŸé‡Œé¢ç»™ä¸€ä¸ªå˜é‡èµ‹å€¼çš„æ—¶å€™ï¼Œ<strong>Pythonè‡ªåŠ¨è®¤ä¸ºè¿™ä¸ªå˜é‡æ˜¯è¿™ä¸ªä½œç”¨åŸŸçš„æœ¬åœ°å˜é‡ï¼Œå¹¶å±è”½ä½œç”¨åŸŸå¤–çš„åŒåçš„å˜é‡</strong>ã€‚</p>
<p>å¾ˆå¤šæ—¶å€™å¯èƒ½åœ¨ä¸€ä¸ªå‡½æ•°é‡Œæ·»åŠ ä¸€ä¸ªèµ‹å€¼çš„è¯­å¥ä¼šè®©ä½ ä»å‰æœ¬æ¥å·¥ä½œçš„ä»£ç å¾—åˆ°ä¸€ä¸ªUnboundLocalErrorã€‚ï¼ˆæ„Ÿå…´è¶£çš„è¯å¯ä»¥è¯»ä¸€è¯»<a href="https://docs.python.org/2/faq/programming.html#why-am-i-getting-an-unboundlocalerror-when-the-variable-has-a-value" target="_blank" rel="external">è¿™ç¯‡</a>æ–‡ç« ã€‚ï¼‰</p>
<p>åœ¨ä½¿ç”¨åˆ—è¡¨ï¼ˆ<a href="https://docs.python.org/2/tutorial/datastructures.html" target="_blank" rel="external">lists</a>ï¼‰çš„æ—¶å€™ï¼Œè¿™ç§æƒ…å†µå°¤ä¸ºçªå‡ºã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code>&gt;&gt;&gt; lst = [1, 2, 3]
&gt;&gt;&gt; def foo1():
...     lst.append(5)   # è¿™æ²¡æœ‰é—®é¢˜...
...
&gt;&gt;&gt; foo1()
&gt;&gt;&gt; lst
[1, 2, 3, 5]

&gt;&gt;&gt; lst = [1, 2, 3]
&gt;&gt;&gt; def foo2():
...     lst += [5]      # ... è¿™å°±æœ‰é—®é¢˜äº†ï¼
...
&gt;&gt;&gt; foo2()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;&lt;stdin&gt;&quot;, line 2, in foo
UnboundLocalError: local variable &apos;lst&apos; referenced before assignment
</code></pre><p>å—¯ï¼Ÿä¸ºä»€ä¹ˆfoo2æœ‰é—®é¢˜ï¼Œè€Œfoo1æ²¡æœ‰é—®é¢˜ï¼Ÿ</p>
<p>ç­”æ¡ˆå’Œä¸Šä¸€ä¸ªä¾‹å­ä¸€æ ·ï¼Œä½†æ˜¯æ›´åŠ ä¸æ˜“å¯Ÿè§‰ã€‚foo1å¹¶æ²¡æœ‰ç»™lst<strong>èµ‹å€¼</strong>ï¼Œä½†æ˜¯foo2å°è¯•ç»™lst<strong>èµ‹å€¼</strong>ã€‚æ³¨æ„lst+=[5]åªæ˜¯lst=lst+[5]çš„ç®€å†™ï¼Œç”±æ­¤å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å°è¯•ç»™lstèµ‹å€¼ï¼ˆå› æ­¤Pythonå‡è®¾ä½œç”¨åŸŸä¸ºæœ¬åœ°ï¼‰ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªè¦èµ‹ç»™lstçš„å€¼æ˜¯åŸºäºlstæœ¬èº«çš„ï¼ˆè¿™é‡Œçš„ä½œç”¨åŸŸä»ç„¶æ˜¯æœ¬åœ°ï¼‰ï¼Œè€Œlstå´æ²¡æœ‰è¢«å®šä¹‰ï¼Œè¿™å°±å‡ºé”™äº†ã€‚</p>
<p>##åœ¨éå†åˆ—è¡¨çš„åŒæ—¶åˆåœ¨ä¿®æ”¹è¿™ä¸ªåˆ—è¡¨</p>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­çš„ä»£ç åº”è¯¥æ¯”è¾ƒæ˜æ˜¾äº†ï¼š</p>
<pre><code>&gt;&gt;&gt; odd = lambda x : bool(x % 2)
&gt;&gt;&gt; numbers = [n for n in range(10)]
&gt;&gt;&gt; for i in range(len(numbers)):
...     if odd(numbers[i]):
...         del numbers[i]  # è¿™ä¸å¯¹çš„ï¼šåœ¨éå†åˆ—è¡¨æ—¶åˆ æ‰åˆ—è¡¨çš„å…ƒç´ ã€‚
...
Traceback (most recent call last):
      File &quot;&lt;stdin&gt;&quot;, line 2, in &lt;module&gt;
IndexError: list index out of range
</code></pre><p>éå†ä¸€ä¸ªåˆ—è¡¨æˆ–è€…æ•°ç»„çš„åŒæ—¶åˆåˆ é™¤é‡Œé¢çš„å…ƒç´ ï¼Œå¯¹ä»»ä½•æœ‰ç»éªŒçš„è½¯ä»¶å¼€å‘äººå‘˜æ¥è¯´è¿™æ˜¯ä¸ªå¾ˆæ˜æ˜¾çš„é”™è¯¯ã€‚ä½†æ˜¯åƒä¸Šé¢çš„ä¾‹å­é‚£æ ·æ˜æ˜¾çš„é”™è¯¯ï¼Œå³ä½¿æœ‰ç»éªŒçš„ç¨‹åºå‘˜ä¹Ÿå¯èƒ½ä¸ç»æ„é—´åœ¨æ›´åŠ å¤æ‚çš„ç¨‹åºä¸­ä¸å°å¿ƒçŠ¯é”™ã€‚</p>
<p>æ‰€å¹¸ï¼ŒPythoné›†æˆäº†ä¸€äº›ä¼˜é›…çš„ç¼–ç¨‹èŒƒå¼ï¼Œå¦‚æœä½¿ç”¨å¾—å½“ï¼Œå¯ä»¥å†™å‡ºç›¸å½“ç®€åŒ–å’Œç²¾ç®€çš„ä»£ç ã€‚ä¸€ä¸ªé™„åŠ çš„å¥½å¤„æ˜¯æ›´ç®€å•çš„ä»£ç æ›´ä¸å®¹æ˜“é‡åˆ°è¿™ç§â€œä¸å°å¿ƒåœ¨éå†åˆ—è¡¨æ—¶åˆ æ‰åˆ—è¡¨å…ƒç´ â€çš„bugã€‚ä¾‹å¦‚<strong>åˆ—è¡¨æ¨å¯¼å¼</strong>ï¼ˆ<a href="https://docs.python.org/2/tutorial/datastructures.html#tut-listcomps" target="_blank" rel="external">list comprehensions</a>ï¼‰å°±æä¾›äº†è¿™æ ·çš„èŒƒå¼ã€‚å†è€…ï¼Œåˆ—è¡¨æ¨å¯¼å¼åœ¨é¿å…è¿™æ ·çš„é—®é¢˜ä¸Šç‰¹åˆ«æœ‰ç”¨ï¼Œæ¥ä¸‹æ¥è¿™ä¸ªå¯¹ä¸Šé¢çš„ä»£ç çš„é‡æ–°å®ç°å°±ç›¸å½“å®Œç¾ï¼š</p>
<pre><code>&gt;&gt;&gt; odd = lambda x : bool(x % 2)
&gt;&gt;&gt; numbers = [n for n in range(10)]
&gt;&gt;&gt; numbers[:] = [n for n in numbers if not odd(n)]  # å•Šï¼Œè¿™å¤šä¼˜ç¾
&gt;&gt;&gt; numbers
[0, 2, 4, 6, 8]
</code></pre><p>##æä¸æ¸…æ¥šåœ¨é—­åŒ…ï¼ˆclosuresï¼‰ä¸­Pythonæ˜¯æ€æ ·ç»‘å®šå˜é‡çš„    </p>
<p>çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code>&gt;&gt;&gt; def create_multipliers():
...     return [lambda x : i * x for i in range(5)]
&gt;&gt;&gt; for multiplier in create_multipliers():
...     print multiplier(2)
...
</code></pre><p>æœŸæœ›å¾—åˆ°ä¸‹é¢çš„è¾“å‡ºï¼š</p>
<pre><code>0
2
4
6
8
</code></pre><p>ä½†æ˜¯å®é™…ä¸Šå¾—åˆ°çš„æ˜¯ï¼š</p>
<pre><code>8
8
8
8
8
</code></pre><p>æ„å¤–å§ï¼</p>
<p>è¿™æ˜¯ç”±äºPythonçš„<strong>åæœŸç»‘å®š</strong>ï¼ˆlate bindingï¼‰æœºåˆ¶å¯¼è‡´çš„ï¼Œè¿™æ˜¯æŒ‡åœ¨é—­åŒ…ä¸­ä½¿ç”¨çš„å˜é‡çš„å€¼ï¼Œæ˜¯åœ¨å†…å±‚å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æŸ¥æ‰¾çš„ã€‚å› æ­¤åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå½“ä»»ä¸€è¿”å›å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œiçš„å€¼æ˜¯åœ¨<strong>å®ƒè¢«è°ƒç”¨æ—¶çš„å‘¨å›´ä½œç”¨åŸŸ</strong>ä¸­æŸ¥æ‰¾ï¼ˆåˆ°é‚£æ—¶ï¼Œå¾ªç¯å·²ç»ç»“æŸäº†ï¼Œæ‰€ä»¥iå·²ç»è¢«èµ‹äºˆäº†å®ƒæœ€ç»ˆçš„å€¼4ï¼‰ã€‚</p>
<p>è§£å†³çš„åŠæ³•æ¯”è¾ƒå·§å¦™ï¼š</p>
<pre><code>&gt;&gt;&gt; def create_multipliers():
...     return [lambda x, i=i : i * x for i in range(5)]
...
&gt;&gt;&gt; for multiplier in create_multipliers():
...     print multiplier(2)
...
0
2
4
6
8
</code></pre><p>è¿™ä¸‹å¯¹äº†ï¼è¿™é‡Œåˆ©ç”¨äº†é»˜è®¤å‚æ•°å»äº§ç”ŸåŒ¿åå‡½æ•°ä»¥è¾¾åˆ°æœŸæœ›çš„æ•ˆæœã€‚æœ‰äººä¼šè¯´è¿™å¾ˆä¼˜ç¾ï¼Œæœ‰äººä¼šè¯´è¿™å¾ˆå¾®å¦™ï¼Œä¹Ÿæœ‰äººä¼šè§‰å¾—åæ„Ÿã€‚ä½†æ˜¯å¦‚æœä½ æ˜¯ä¸€åPythonç¨‹åºå‘˜ï¼Œé‡è¦çš„æ˜¯èƒ½ç†è§£ä»»ä½•çš„æƒ…å†µã€‚</p>
<p>##å¾ªç¯åŠ è½½æ¨¡å—</p>
<p>å‡è®¾ä½ æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œa.pyå’Œb.pyï¼Œåœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­äº’ç›¸åŠ è½½å¯¹æ–¹ï¼Œä¾‹å¦‚ï¼š</p>
<p>åœ¨a.pyä¸­ï¼š</p>
<pre><code>import b
def f():
    return b.x
print f()
</code></pre><p>åœ¨b.pyä¸­ï¼š</p>
<pre><code>import a
x = 1
def g():
    print a.f()
</code></pre><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¯•ç€åŠ è½½a.pyï¼š</p>
<pre><code>&gt;&gt;&gt; import a
1
</code></pre><p>æ²¡æœ‰é—®é¢˜ã€‚ä¹Ÿè®¸è®©äººåƒæƒŠï¼Œæ¯•ç«Ÿæœ‰ä¸ªæ„Ÿè§‰åº”è¯¥æ˜¯é—®é¢˜çš„å¾ªç¯åŠ è½½åœ¨è¿™å„¿ã€‚</p>
<p>äº‹å®ä¸Šåœ¨Pythonä¸­ä»…ä»…æ˜¯è¡¨é¢ä¸Šçš„å‡ºç°å¾ªç¯åŠ è½½å¹¶ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—ä»¥åŠè¢«åŠ è½½äº†ï¼ŒPythonä¸ä¼šå‚»åˆ°å†å»é‡æ–°åŠ è½½ä¸€éã€‚ä½†æ˜¯ï¼Œå½“æ¯ä¸ªæ¨¡å—éƒ½æƒ³è¦äº’ç›¸è®¿é—®å®šä¹‰åœ¨å¯¹æ–¹é‡Œçš„å‡½æ•°æˆ–è€…å˜é‡æ—¶ï¼Œé—®é¢˜å°±æ¥äº†ã€‚</p>
<p>è®©æˆ‘ä»¬å†å›åˆ°ä¹‹å‰çš„ä¾‹å­ï¼Œå½“æˆ‘ä»¬åŠ è½½a.pyæ—¶ï¼Œå®ƒ<strong>å†åŠ è½½b.py</strong>ä¸ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºåœ¨åŠ è½½b.pyæ—¶ï¼Œå®ƒå¹¶ä¸éœ€è¦è®¿é—®a.pyçš„ä»»ä½•ä¸œè¥¿ï¼Œè€Œåœ¨b.pyä¸­å”¯ä¸€çš„å¼•ç”¨å°±æ˜¯è°ƒç”¨a.f()ã€‚ä½†æ˜¯è¿™ä¸ªè°ƒç”¨æ˜¯åœ¨å‡½æ•°g()ä¸­å®Œæˆçš„ï¼Œå¹¶ä¸”a.pyæˆ–è€…b.pyä¸­æ²¡æœ‰äººè°ƒç”¨g()ï¼Œæ‰€ä»¥è¿™ä¼šå„¿å¿ƒæƒ…è¿˜æ˜¯ç¾ä¸½çš„ã€‚</p>
<p>ä½†æ˜¯å½“æˆ‘ä»¬è¯•å›¾åŠ è½½b.pyæ—¶ï¼ˆä¹‹å‰æ²¡æœ‰åŠ è½½a.pyï¼‰ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼š</p>
<pre><code>&gt;&gt;&gt; import b
Traceback (most recent call last):
      File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
      File &quot;b.py&quot;, line 1, in &lt;module&gt;
    import a
      File &quot;a.py&quot;, line 6, in &lt;module&gt;
    print f()
      File &quot;a.py&quot;, line 4, in f
    return b.x
AttributeError: &apos;module&apos; object has no attribute &apos;x&apos;
</code></pre><p>æ­å–œä½ ï¼Œå‡ºé”™äº†ã€‚è¿™é‡Œé—®é¢˜å‡ºåœ¨åŠ è½½b.pyçš„è¿‡ç¨‹ä¸­ï¼ŒPythonè¯•å›¾åŠ è½½a.pyï¼Œå¹¶ä¸”åœ¨a.pyä¸­éœ€è¦è°ƒç”¨åˆ°f()ï¼Œè€Œå‡½æ•°f()åˆè¦è®¿é—®åˆ°b.xï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™b.xå´è¿˜æ²¡æœ‰è¢«å®šä¹‰ã€‚è¿™å°±äº§ç”Ÿäº†AttributeErrorå¼‚å¸¸ã€‚</p>
<p>è§£å†³çš„æ–¹æ¡ˆå¯ä»¥åšä¸€ç‚¹ç»†å¾®çš„æ”¹åŠ¨ã€‚æ”¹ä¸€ä¸‹b.pyï¼Œä½¿å¾—å®ƒåœ¨g()é‡Œé¢åŠ è½½a.pyï¼š</p>
<pre><code>x = 1
def g():
    import a    # åªæœ‰å½“g()è¢«è°ƒç”¨çš„æ—¶å€™æ‰åŠ è½½
    print a.f()
</code></pre><p>è¿™ä¼šå„¿å½“æˆ‘ä»¬åŠ è½½b.pyçš„æ—¶å€™ï¼Œä¸€åˆ‡å®‰å¥½ï¼š</p>
<pre><code>&gt;&gt;&gt; import b
&gt;&gt;&gt; b.g()
1   # ç¬¬ä¸€æ¬¡è¾“å‡ºï¼Œå› ä¸ºæ¨¡å—aåœ¨æœ€åè°ƒç”¨äº†â€˜print f()â€™
1   # ç¬¬äºŒæ¬¡è¾“å‡ºï¼Œè¿™æ˜¯æˆ‘ä»¬è°ƒç”¨g()
</code></pre><p>##ä¸Pythonæ ‡å‡†åº“æ¨¡å—å‘½åå†²çª</p>
<p>Pythonçš„ä¸€ä¸ªä¼˜ç§€çš„åœ°æ–¹åœ¨äºå®ƒæä¾›äº†ä¸°å¯Œçš„åº“æ¨¡å—ã€‚ä½†æ˜¯è¿™æ ·çš„ç»“æœæ˜¯ï¼Œå¦‚æœä½ ä¸ä¸‹æ„è¯†çš„é¿å…ï¼Œå¾ˆå®¹æ˜“ä½ ä¼šé‡åˆ°ä½ è‡ªå·±çš„æ¨¡å—çš„åå­—ä¸æŸä¸ªéšPythoné™„å¸¦çš„æ ‡å‡†åº“çš„åå­—å†²çªçš„æƒ…å†µï¼ˆæ¯”å¦‚ï¼Œä½ çš„ä»£ç ä¸­å¯èƒ½æœ‰ä¸€ä¸ªå«åšemail.pyçš„æ¨¡å—ï¼Œå®ƒå°±ä¼šä¸æ ‡å‡†åº“ä¸­åŒåçš„æ¨¡å—å†²çªï¼‰ã€‚</p>
<p>è¿™ä¼šå¯¼è‡´ä¸€äº›å¾ˆç²—ç³™çš„é—®é¢˜ï¼Œä¾‹å¦‚å½“ä½ æƒ³åŠ è½½æŸä¸ªåº“ï¼Œè¿™ä¸ªåº“éœ€è¦åŠ è½½Pythonæ ‡å‡†åº“é‡Œçš„æŸä¸ªæ¨¡å—ï¼Œç»“æœå‘¢ï¼Œå› ä¸ºä½ æœ‰ä¸€ä¸ªä¸æ ‡å‡†åº“é‡Œçš„æ¨¡å—åŒåçš„æ¨¡å—ï¼Œè¿™ä¸ªåŒ…é”™è¯¯çš„å°†ä½ çš„æ¨¡å—åŠ è½½äº†è¿›å»ï¼Œè€Œä¸æ˜¯åŠ è½½Pythonæ ‡å‡†åº“é‡Œçš„é‚£ä¸ªæ¨¡å—ã€‚è¿™æ ·ä¸€æ¥å°±ä¼šæœ‰éº»çƒ¦äº†ã€‚</p>
<p>æ‰€ä»¥åœ¨ç»™æ¨¡å—èµ·åå­—çš„æ—¶å€™è¦å°å¿ƒäº†ï¼Œå¾—é¿å…ä¸Pythonæ ‡å‡†åº“ä¸­çš„æ¨¡å—é‡åã€‚ç›¸æ¯”èµ·ä½ æäº¤ä¸€ä¸ªâ€œ<a href="http://legacy.python.org/dev/peps/" target="_blank" rel="external">Pythonæ”¹è¿›å»ºè®®ï¼ˆPython Enhancement Proposal (PEP)ï¼‰</a>â€å»å‘ä¸Šè¦æ±‚æ”¹ä¸€ä¸ªæ ‡å‡†åº“é‡ŒåŒ…çš„åå­—ï¼Œå¹¶å¾—åˆ°æ‰¹å‡†æ¥è¯´ï¼Œä½ æŠŠè‡ªå·±çš„é‚£ä¸ªæ¨¡å—é‡æ–°æ”¹ä¸ªåå­—è¦ç®€å•å¾—å¤šã€‚</p>
<p>##ä¸èƒ½åŒºåˆ†Python 2å’ŒPython 3</p>
<p>çœ‹ä¸‹é¢è¿™ä¸ªæ–‡ä»¶foo.pyï¼š</p>
<pre><code>import sys

def bar(i):
    if i == 1:
        raise KeyError(1)
    if i == 2:
        raise ValueError(2)

def bad():
    e = None
    try:
        bar(int(sys.argv[1]))
    except KeyError as e:
        print(&apos;key error&apos;)
    except ValueError as e:
        print(&apos;value error&apos;)
    print(e)

bad()
</code></pre><p>åœ¨Python 2é‡Œï¼Œè¿è¡Œèµ·æ¥æ²¡æœ‰é—®é¢˜ï¼š</p>
<pre><code>$ python foo.py 1
key error
1
$ python foo.py 2
value error
2
</code></pre><p>ä½†æ˜¯å¦‚æœæ‹¿åˆ°Python 3ä¸Šé¢ç©ç©ï¼š</p>
<pre><code>$ python3 foo.py 1
key error
Traceback (most recent call last):
  File &quot;foo.py&quot;, line 19, in &lt;module&gt;
    bad()
  File &quot;foo.py&quot;, line 17, in bad
    print(e)
UnboundLocalError: local variable &apos;e&apos; referenced before assignment
</code></pre><p>è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿâ€œé—®é¢˜â€åœ¨äºï¼Œ<strong>åœ¨Python 3é‡Œï¼Œåœ¨exceptå—çš„ä½œç”¨åŸŸä»¥å¤–ï¼Œå¼‚å¸¸å¯¹è±¡ï¼ˆexception objectï¼‰æ˜¯ä¸èƒ½è¢«è®¿é—®çš„</strong>ã€‚ï¼ˆåŸå› åœ¨äºï¼Œå¦‚æœä¸è¿™æ ·çš„è¯ï¼ŒPythonä¼šåœ¨å†…å­˜çš„å †æ ˆé‡Œä¿æŒä¸€ä¸ªå¼•ç”¨é“¾ç›´åˆ°Pythonçš„åƒåœ¾å¤„ç†å°†è¿™äº›å¼•ç”¨ä»å†…å­˜ä¸­æ¸…é™¤æ‰ã€‚æ›´å¤šçš„æŠ€æœ¯ç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://docs.python.org/3/reference/compound_stmts.html#except" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚ï¼‰</p>
<p>é¿å…è¿™æ ·çš„é—®é¢˜å¯ä»¥è¿™æ ·åšï¼šä¿æŒåœ¨execptå—ä½œç”¨åŸŸä»¥å¤–å¯¹å¼‚å¸¸å¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™æ ·æ˜¯å¯ä»¥è®¿é—®çš„ã€‚ä¸‹é¢æ˜¯ç”¨è¿™ä¸ªåŠæ³•å¯¹ä¹‹å‰çš„ä¾‹å­åšçš„æ”¹åŠ¨ï¼Œè¿™æ ·åœ¨Python 2å’ŒPython 3é‡Œé¢éƒ½è¿è¡Œéƒ½æ²¡æœ‰é—®é¢˜ã€‚</p>
<pre><code>import sys

def bar(i):
    if i == 1:
        raise KeyError(1)
    if i == 2:
        raise ValueError(2)

def good():
    exception = None
    try:
        bar(int(sys.argv[1]))
    except KeyError as e:
        exception = e
        print(&apos;key error&apos;)
    except ValueError as e:
        exception = e
        print(&apos;value error&apos;)
    print(exception)

good()
</code></pre><p>åœ¨Py3ké‡Œé¢è¿è¡Œï¼š</p>
<pre><code>$ python3 foo.py 1
key error
1
$ python3 foo.py 2
value error
2
</code></pre><p>è€¶ï¼</p>
<p>##é”™è¯¯çš„ä½¿ç”¨<strong>del</strong>æ–¹æ³•</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶mod.pyä¸­è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code>import foo

class Bar(object):
        ...
    def __del__(self):
        foo.cleanup(self.myhandle)
</code></pre><p>ç„¶åè¯•å›¾åœ¨another_mod.pyé‡Œè¿™æ ·ï¼š</p>
<pre><code>import mod
mybar = mod.Bar()
</code></pre><p>é‚£ä¹ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªæ¶å¿ƒçš„AttributeErrorå¼‚å¸¸ã€‚</p>
<p>ä¸ºå•¥å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼ˆå‚è€ƒ<a href="https://mail.python.org/pipermail/python-bugs-list/2009-January/069209.html" target="_blank" rel="external">è¿™é‡Œ</a>ï¼‰ï¼Œå½“è§£é‡Šå™¨å…³é—­æ—¶ï¼Œæ¨¡å—æ‰€æœ‰çš„å…¨å±€å˜é‡ä¼šè¢«ç½®ä¸ºç©ºï¼ˆNoneï¼‰ã€‚ç»“æœä¾¿å¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œå½“<strong>del</strong>è¢«è°ƒç”¨æ—¶ï¼Œåå­—fooå·²ç»è¢«ç½®ä¸ºç©ºäº†ã€‚</p>
<p>ä½¿ç”¨<code>atexit.register()</code>å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚æ­¤ï¼Œå½“ä½ çš„ç¨‹åºç»“æŸçš„æ—¶å€™ï¼ˆé€€å‡ºçš„æ—¶å€™ï¼‰ï¼Œä½ çš„æ³¨å†Œçš„å¤„ç†ç¨‹åºä¼šåœ¨è§£é‡Šå™¨å…³é—­ä¹‹å‰å¤„ç†ã€‚</p>
<p>è¿™æ ·ç†è§£çš„è¯ï¼Œå¯¹ä¸Šé¢çš„mod.pyå¯ä»¥åšå¦‚ä¸‹çš„ä¿®æ”¹ï¼š</p>
<pre><code>import foo
import atexit

def cleanup(handle):
    foo.cleanup(handle)

class Bar(object):
    def __init__(self):
        ...
        atexit.register(cleanup, self.myhandle)
</code></pre><p>è¿™æ ·çš„å®ç°æ–¹å¼ä¸ºåœ¨ç¨‹åºæ­£å¸¸ç»ˆæ­¢æ—¶è°ƒç”¨æ¸…é™¤åŠŸèƒ½æä¾›äº†ä¸€ç§å¹²å‡€å¯é çš„åŠæ³•ã€‚æ˜¾ç„¶ï¼Œéœ€è¦<code>foo.cleanup</code>å†³å®šæ€ä¹ˆå¤„ç†ç»‘å®šåœ¨<code>self.myhandle</code>ä¸Šçš„å¯¹è±¡ï¼Œä½†ä½ çŸ¥é“æ€ä¹ˆåšçš„ã€‚</p>
<p>##æ€»ç»“</p>
<p>Python æ˜¯ä¸€é—¨éå¸¸å¼ºå¤§ä¸”çµæ´»çš„è¯­è¨€ï¼Œå®ƒä¼—å¤šçš„æœºåˆ¶å’ŒèŒƒå¼èƒ½æ˜¾è‘—çš„æé«˜ç”Ÿäº§æ•ˆç‡ã€‚ä¸è¿‡ï¼Œå’Œä»»ä½•ä¸€æ¬¾è½¯ä»¶æˆ–è€…è¯­è¨€ä¸€æ ·ï¼Œå¯¹å®ƒçš„ç†è§£æˆ–è®¤è¯†ä¸è¶³çš„è¯ï¼Œå¸¸å¸¸æ˜¯å¼Šå¤§äºåˆ©çš„ï¼Œå¹¶ä¼šå¤„äºä¸€ç§â€œä¸€çŸ¥åŠè§£â€çš„çŠ¶æ€ã€‚</p>
<p>å¤šç†Ÿæ‚‰Pythonçš„ä¸€äº›å…³é”®çš„ç»†å¾®çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼ˆä½†ä¸å±€é™äºï¼‰æœ¬æ–‡ä¸­æåˆ°çš„è¿™äº›é—®é¢˜ï¼Œå¯ä»¥å¸®ä½ æ›´å¥½çš„ä½¿ç”¨è¿™é—¨è¯­è¨€çš„åŒæ—¶å¸®ä½ é¿å…ä¸€äº›å¸¸è§çš„é™·é˜±ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/img/lufei.jpeg"
               alt="You Wangqiu" />
          <p class="site-author-name" itemprop="name">You Wangqiu</p>
           
              <p class="site-description motion-element" itemprop="description">ä¸–ä¹‹å¥‡ä¼Ÿã€ç‘°æ€ªï¼Œéå¸¸ä¹‹è§‚ï¼Œå¸¸åœ¨äºé™©è¿œï¼Œè€Œäººä¹‹æ‰€ç½•è‡³ç„‰ï¼Œæ•…éæœ‰å¿—è€…ä¸èƒ½è‡³ä¹Ÿ</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">168</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/michaelyou" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/zhi-yu-65-2" target="_blank" title="çŸ¥ä¹">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      çŸ¥ä¹
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="michaelseu2011@gmail.com" target="_blank" title="E-Mail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      E-Mail
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">You Wangqiu</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
